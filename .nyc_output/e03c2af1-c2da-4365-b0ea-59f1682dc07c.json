{"D:\\projects\\github-pr-analytics\\src\\index.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"5":{"start":{"line":9,"column":18},"end":{"line":9,"column":53}},"6":{"start":{"line":11,"column":20},"end":{"line":11,"column":42}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":36}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":32}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/index.ts","sources":["D:/projects/github-pr-analytics/src/index.ts"],"names":[],"mappings":";;;;;AAAA,wBAAwB;AACxB,yBAAuB;AACvB,4BAA0B;AAC1B,sDAA8B;AAE9B,wBAAwB;AACxB,2CAAwC;AAExC,MAAM,GAAG,GAAG,IAAA,iBAAO,GAAE,CAAC;AAEtB,IAAA,qBAAS,EAAC,GAAG,CAAC,CAAC;AAEf,kBAAe,GAAG,CAAC","sourcesContent":["// external dependencies\r\nimport \"dotenv/config\";\r\nimport \"reflect-metadata\";\r\nimport express from \"express\";\r\n\r\n// internal dependencies\r\nimport { bootstrap } from \"./bootstrap\";\r\n\r\nconst app = express();\r\n\r\nbootstrap(app);\r\n\r\nexport default app;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"407a8b6ae8b30fcbb1a041a7b1383e5027437461","contentHash":"93684b9d0d8e0ce52dec4cd409b02dc7c61bc912c5af45783148b7c367bd2a7e"},"D:\\projects\\github-pr-analytics\\src\\bootstrap.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\bootstrap.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":30}},"16":{"start":{"line":17,"column":17},"end":{"line":17,"column":51}},"17":{"start":{"line":18,"column":15},"end":{"line":18,"column":47}},"18":{"start":{"line":19,"column":19},"end":{"line":19,"column":55}},"19":{"start":{"line":20,"column":18},"end":{"line":20,"column":53}},"20":{"start":{"line":22,"column":17},"end":{"line":22,"column":59}},"21":{"start":{"line":23,"column":13},"end":{"line":23,"column":34}},"22":{"start":{"line":24,"column":17},"end":{"line":24,"column":42}},"23":{"start":{"line":25,"column":19},"end":{"line":25,"column":64}},"24":{"start":{"line":26,"column":20},"end":{"line":26,"column":66}},"25":{"start":{"line":27,"column":21},"end":{"line":27,"column":68}},"26":{"start":{"line":28,"column":21},"end":{"line":28,"column":68}},"27":{"start":{"line":29,"column":22},"end":{"line":29,"column":52}},"28":{"start":{"line":30,"column":23},"end":{"line":30,"column":60}},"29":{"start":{"line":31,"column":20},"end":{"line":31,"column":49}},"30":{"start":{"line":36,"column":4},"end":{"line":36,"column":37}},"31":{"start":{"line":37,"column":4},"end":{"line":37,"column":73}},"32":{"start":{"line":38,"column":4},"end":{"line":38,"column":38}},"33":{"start":{"line":39,"column":4},"end":{"line":39,"column":73}},"34":{"start":{"line":45,"column":4},"end":{"line":45,"column":65}},"35":{"start":{"line":46,"column":4},"end":{"line":46,"column":65}},"36":{"start":{"line":47,"column":4},"end":{"line":47,"column":63}},"37":{"start":{"line":48,"column":4},"end":{"line":48,"column":64}},"38":{"start":{"line":54,"column":4},"end":{"line":89,"column":8}},"39":{"start":{"line":54,"column":64},"end":{"line":89,"column":6}},"40":{"start":{"line":55,"column":8},"end":{"line":88,"column":9}},"41":{"start":{"line":56,"column":28},"end":{"line":56,"column":68}},"42":{"start":{"line":58,"column":12},"end":{"line":73,"column":13}},"43":{"start":{"line":60,"column":20},"end":{"line":60,"column":66}},"44":{"start":{"line":61,"column":20},"end":{"line":61,"column":26}},"45":{"start":{"line":63,"column":20},"end":{"line":63,"column":63}},"46":{"start":{"line":64,"column":20},"end":{"line":64,"column":26}},"47":{"start":{"line":66,"column":20},"end":{"line":66,"column":64}},"48":{"start":{"line":67,"column":20},"end":{"line":67,"column":26}},"49":{"start":{"line":69,"column":20},"end":{"line":69,"column":67}},"50":{"start":{"line":70,"column":20},"end":{"line":70,"column":26}},"51":{"start":{"line":72,"column":20},"end":{"line":72,"column":61}},"52":{"start":{"line":74,"column":12},"end":{"line":79,"column":15}},"53":{"start":{"line":82,"column":24},"end":{"line":82,"column":29}},"54":{"start":{"line":83,"column":12},"end":{"line":83,"column":116}},"55":{"start":{"line":84,"column":12},"end":{"line":87,"column":15}},"56":{"start":{"line":95,"column":4},"end":{"line":109,"column":7}},"57":{"start":{"line":96,"column":8},"end":{"line":96,"column":29}},"58":{"start":{"line":97,"column":8},"end":{"line":97,"column":24}},"59":{"start":{"line":98,"column":8},"end":{"line":98,"column":29}},"60":{"start":{"line":99,"column":8},"end":{"line":99,"column":45}},"61":{"start":{"line":100,"column":8},"end":{"line":108,"column":9}},"62":{"start":{"line":101,"column":12},"end":{"line":101,"column":38}},"63":{"start":{"line":102,"column":12},"end":{"line":102,"column":55}},"64":{"start":{"line":103,"column":12},"end":{"line":103,"column":124}},"65":{"start":{"line":103,"column":51},"end":{"line":103,"column":122}},"66":{"start":{"line":106,"column":12},"end":{"line":106,"column":71}},"67":{"start":{"line":107,"column":12},"end":{"line":107,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"initMiddlewares","decl":{"start":{"line":35,"column":9},"end":{"line":35,"column":24}},"loc":{"start":{"line":35,"column":30},"end":{"line":40,"column":1}},"line":35},"9":{"name":"initRoutes","decl":{"start":{"line":44,"column":9},"end":{"line":44,"column":19}},"loc":{"start":{"line":44,"column":25},"end":{"line":49,"column":1}},"line":44},"10":{"name":"initHealthCheck","decl":{"start":{"line":53,"column":9},"end":{"line":53,"column":24}},"loc":{"start":{"line":53,"column":30},"end":{"line":90,"column":1}},"line":53},"11":{"name":"(anonymous_11)","decl":{"start":{"line":54,"column":52},"end":{"line":54,"column":53}},"loc":{"start":{"line":54,"column":64},"end":{"line":89,"column":6}},"line":54},"12":{"name":"(anonymous_12)","decl":{"start":{"line":54,"column":96},"end":{"line":54,"column":97}},"loc":{"start":{"line":54,"column":109},"end":{"line":89,"column":5}},"line":54},"13":{"name":"bootstrap","decl":{"start":{"line":94,"column":9},"end":{"line":94,"column":18}},"loc":{"start":{"line":94,"column":24},"end":{"line":110,"column":1}},"line":94},"14":{"name":"(anonymous_14)","decl":{"start":{"line":95,"column":43},"end":{"line":95,"column":44}},"loc":{"start":{"line":95,"column":56},"end":{"line":109,"column":5}},"line":95},"15":{"name":"(anonymous_15)","decl":{"start":{"line":103,"column":45},"end":{"line":103,"column":46}},"loc":{"start":{"line":103,"column":51},"end":{"line":103,"column":122}},"line":103}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":58,"column":12},"end":{"line":73,"column":13}},"type":"switch","locations":[{"start":{"line":59,"column":16},"end":{"line":61,"column":26}},{"start":{"line":62,"column":16},"end":{"line":64,"column":26}},{"start":{"line":65,"column":16},"end":{"line":67,"column":26}},{"start":{"line":68,"column":16},"end":{"line":70,"column":26}},{"start":{"line":71,"column":16},"end":{"line":72,"column":61}}],"line":58}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":5,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":5,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,4],"7":[5,5],"8":[0,0,0,0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/bootstrap.ts","sources":["D:/projects/github-pr-analytics/src/bootstrap.ts"],"names":[],"mappings":"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","sourcesContent":["// external dependencies\r\nimport helmet from \"helmet\";\r\nimport cors from \"cors\";\r\nimport mongoose from \"mongoose\";\r\nimport express, { Application, Request, Response } from \"express\";\r\n\r\n// internal dependencies\r\nimport logger from \"./utils/logger\";\r\nimport { connect } from \"./utils/db\";\r\nimport { config } from \"./utils/config\";\r\nimport prRoutes from \"./routes/prRoutes\";\r\nimport devRoutes from \"./routes/devRoutes\";\r\nimport authRoutes from \"./routes/authRoutes\";\r\nimport userRoutes from \"./routes/userRoutes\";\r\nimport { apiRateLimiter } from \"./utils/rateLimiter\";\r\nimport { errorHandler } from \"./middlewares/errorHandler\";\r\nimport {\r\n  API_ENDPOINTS,\r\n  DB_STATES,\r\n  MESSAGES,\r\n  STATUS_CODES,\r\n} from \"./common/constants\";\r\nimport { APIError } from \"./common/types\";\r\n\r\n/**\r\n * Initializes global middlewares\r\n */\r\nfunction initMiddlewares(app: Application): void {\r\n  app.use(helmet());\r\n  app.use(cors({ origin: config.corsOrigin }));\r\n  app.use(express.json());\r\n  app.use(API_ENDPOINTS.API, apiRateLimiter);\r\n}\r\n\r\n/**\r\n * Registers all API routes\r\n */\r\nfunction initRoutes(app: Application): void {\r\n  app.use(API_ENDPOINTS.API, authRoutes);\r\n  app.use(API_ENDPOINTS.API, userRoutes);\r\n  app.use(API_ENDPOINTS.API, prRoutes);\r\n  app.use(API_ENDPOINTS.API, devRoutes);\r\n}\r\n\r\n/**\r\n * Health check route for DB status and uptime\r\n */\r\nfunction initHealthCheck(app: Application): void {\r\n  app.get(API_ENDPOINTS.HEALTH_CHECK, async (_: Request, res: Response) => {\r\n    try {\r\n      const dbState = mongoose.connection.readyState;\r\n      let dbStatus: string;\r\n\r\n      switch (dbState) {\r\n        case 0:\r\n          dbStatus = DB_STATES.DISCONNECTED;\r\n          break;\r\n        case 1:\r\n          dbStatus = DB_STATES.CONNECTED;\r\n          break;\r\n        case 2:\r\n          dbStatus = DB_STATES.CONNECTING;\r\n          break;\r\n        case 3:\r\n          dbStatus = DB_STATES.DISCONNECTING;\r\n          break;\r\n        default:\r\n          dbStatus = DB_STATES.UNKNOWN;\r\n      }\r\n\r\n      res.status(STATUS_CODES.OK).json({\r\n        status: MESSAGES.STATUS_OK,\r\n        uptime: process.uptime(),\r\n        dbStatus,\r\n        timestamp: new Date().toISOString(),\r\n      });\r\n    } catch (error) {\r\n      const err = error as APIError;\r\n      logger.error(\r\n        `${err}, route: ${API_ENDPOINTS.HEALTH_CHECK}, Health check failed`\r\n      );\r\n      res.status(STATUS_CODES.INTERNAL_SERVER_ERROR).json({\r\n        status: MESSAGES.INTERNAL_SERVER_ERROR,\r\n        error: err.message,\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Initializes and starts the app\r\n */\r\nexport async function bootstrap(app: Application): Promise<void> {\r\n  initMiddlewares(app);\r\n  initRoutes(app);\r\n  initHealthCheck(app);\r\n  app.use(errorHandler);\r\n\r\n  try {\r\n    await connect();\r\n    logger.info(\"MongoDB connected\");\r\n    app.listen(config.port, () =>\r\n      logger.info(`Server running on port ${config.port}`)\r\n    );\r\n  } catch (err) {\r\n    logger.error(`${err}, MongoDB connection error`);\r\n    process.exit(1);\r\n  }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2d3ffd109a122cac1785f1f148a9f3de2146a3cc","contentHash":"ec544845b9ff94d8d5cdd535f5849d5e13f336d8a6bf5bf1c8554b1013a60296"},"D:\\projects\\github-pr-analytics\\src\\utils\\logger.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\utils\\logger.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":7,"column":18},"end":{"line":7,"column":53}},"4":{"start":{"line":9,"column":15},"end":{"line":19,"column":2}},"5":{"start":{"line":20,"column":0},"end":{"line":20,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":10,"column":11},"end":{"line":10,"column":42}},"type":"binary-expr","locations":[{"start":{"line":10,"column":11},"end":{"line":10,"column":32}},{"start":{"line":10,"column":36},"end":{"line":10,"column":42}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,1]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/utils/logger.ts","sources":["D:/projects/github-pr-analytics/src/utils/logger.ts"],"names":[],"mappings":";;;;;AAAA,wBAAwB;AACxB,sDAA8B;AAE9B,uEAAuE;AACvE,MAAM,MAAM,GAAG,iBAAO,CAAC,YAAY,CAAC;IAClC,KAAK,EAAE,OAAO,CAAC,GAAG,CAAC,SAAS,IAAI,MAAM;IACtC,MAAM,EAAE,iBAAO,CAAC,MAAM,CAAC,OAAO,CAC5B,iBAAO,CAAC,MAAM,CAAC,SAAS,EAAE,EAC1B,iBAAO,CAAC,MAAM,CAAC,IAAI,EAAE,CACtB;IACD,UAAU,EAAE;QACV,iBAAiB;QACjB,IAAI,iBAAO,CAAC,UAAU,CAAC,OAAO,CAAC;YAC7B,YAAY,EAAE,CAAC,OAAO,CAAC;YACvB,iBAAiB,EAAE,CAAC,MAAM,CAAC;SAC5B,CAAC;KACH;CACF,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","sourcesContent":["// external dependencies\r\nimport winston from 'winston';\r\n\r\n// Create a Winston logger instance with JSON formatting and timestamps\r\nconst logger = winston.createLogger({\r\n  level: process.env.LOG_LEVEL || 'info',\r\n  format: winston.format.combine(\r\n    winston.format.timestamp(),\r\n    winston.format.json()\r\n  ),\r\n  transports: [\r\n    // Log to console\r\n    new winston.transports.Console({\r\n      stderrLevels: ['error'],\r\n      consoleWarnLevels: ['warn'],\r\n    }),\r\n  ],\r\n});\r\n\r\nexport default logger;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c237ec997ee3e37359f7db1bafa33a5cf02c3eca","contentHash":"a55710e7b0ccd89340afffec782fa786cb50a9ed7844bb86134ccc7ca79d377e"},"D:\\projects\\github-pr-analytics\\src\\utils\\db.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\utils\\db.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":26}},"14":{"start":{"line":14,"column":17},"end":{"line":14,"column":36}},"15":{"start":{"line":19,"column":4},"end":{"line":26,"column":7}},"16":{"start":{"line":20,"column":8},"end":{"line":25,"column":9}},"17":{"start":{"line":21,"column":12},"end":{"line":21,"column":47}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"connect","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":16}},"loc":{"start":{"line":18,"column":19},"end":{"line":27,"column":1}},"line":18},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":43},"end":{"line":19,"column":44}},"loc":{"start":{"line":19,"column":56},"end":{"line":26,"column":5}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":20,"column":8},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":25,"column":9}},{"start":{"line":23,"column":13},"end":{"line":25,"column":9}}],"line":20}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/utils/db.ts","sources":["D:/projects/github-pr-analytics/src/utils/db.ts"],"names":[],"mappings":";;;;;;;;;;;AAMA,0BAMC;AAZD,wBAAwB;AACxB,qCAAwC;AAExC;;GAEG;AACH,SAAsB,OAAO;;QACzB,IAAG,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;YACvB,MAAM,IAAA,qBAAY,GAAE,CAAC;QACzB,CAAC;aAAM,CAAC;YACJ,6BAA6B;QACjC,CAAC;IACL,CAAC;CAAA","sourcesContent":["// internal dependencies\r\nimport { connectMongo } from \"./config\";\r\n\r\n/**\r\n * Method to establish mongodb connection\r\n */\r\nexport async function connect() {\r\n    if(!process.env.NODE_ENV) {\r\n        await connectMongo();\r\n    } else {\r\n        // await connectDocumentDB();\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1e8d1816c3e110024b90388d54021c34301c349c","contentHash":"ee8fa4bd669627e92555ccebf41af32aa868f13f1b4ad953215b2eb248f84602"},"D:\\projects\\github-pr-analytics\\src\\utils\\config.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\utils\\config.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":24}},"16":{"start":{"line":16,"column":0},"end":{"line":16,"column":36}},"17":{"start":{"line":18,"column":14},"end":{"line":18,"column":45}},"18":{"start":{"line":19,"column":19},"end":{"line":19,"column":55}},"19":{"start":{"line":21,"column":17},"end":{"line":21,"column":53}},"20":{"start":{"line":23,"column":18},"end":{"line":40,"column":16}},"21":{"start":{"line":42,"column":34},"end":{"line":44,"column":2}},"22":{"start":{"line":45,"column":0},"end":{"line":49,"column":1}},"23":{"start":{"line":46,"column":4},"end":{"line":48,"column":23}},"24":{"start":{"line":47,"column":20},"end":{"line":47,"column":29}},"25":{"start":{"line":51,"column":0},"end":{"line":58,"column":2}},"26":{"start":{"line":59,"column":19},"end":{"line":59,"column":24}},"27":{"start":{"line":66,"column":4},"end":{"line":86,"column":7}},"28":{"start":{"line":67,"column":8},"end":{"line":67,"column":52}},"29":{"start":{"line":68,"column":8},"end":{"line":71,"column":9}},"30":{"start":{"line":69,"column":12},"end":{"line":69,"column":56}},"31":{"start":{"line":70,"column":12},"end":{"line":70,"column":24}},"32":{"start":{"line":72,"column":8},"end":{"line":85,"column":9}},"33":{"start":{"line":73,"column":24},"end":{"line":73,"column":47}},"34":{"start":{"line":74,"column":12},"end":{"line":77,"column":15}},"35":{"start":{"line":78,"column":12},"end":{"line":78,"column":32}},"36":{"start":{"line":79,"column":12},"end":{"line":79,"column":59}},"37":{"start":{"line":80,"column":12},"end":{"line":80,"column":24}},"38":{"start":{"line":83,"column":12},"end":{"line":83,"column":60}},"39":{"start":{"line":84,"column":12},"end":{"line":84,"column":25}},"40":{"start":{"line":88,"column":0},"end":{"line":88,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":47,"column":13},"end":{"line":47,"column":14}},"loc":{"start":{"line":47,"column":20},"end":{"line":47,"column":29}},"line":47},"9":{"name":"connectMongo","decl":{"start":{"line":65,"column":9},"end":{"line":65,"column":21}},"loc":{"start":{"line":65,"column":24},"end":{"line":87,"column":1}},"line":65},"10":{"name":"(anonymous_10)","decl":{"start":{"line":66,"column":43},"end":{"line":66,"column":44}},"loc":{"start":{"line":66,"column":56},"end":{"line":86,"column":5}},"line":66}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":45,"column":0},"end":{"line":49,"column":1}},"type":"if","locations":[{"start":{"line":45,"column":0},"end":{"line":49,"column":1}},{"start":{},"end":{}}],"line":45},"9":{"loc":{"start":{"line":68,"column":8},"end":{"line":71,"column":9}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":71,"column":9}},{"start":{},"end":{}}],"line":68}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":0,"24":0,"25":1,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":3,"8":0,"9":0,"10":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,2],"7":[3,3],"8":[0,1],"9":[0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/utils/config.ts","sources":["D:/projects/github-pr-analytics/src/utils/config.ts"],"names":[],"mappings":"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","sourcesContent":["// external dependencies\r\nimport Joi from \"joi\";\r\nimport mongoose from \"mongoose\";\r\n\r\n// internal dependencies\r\nimport logger from \"./logger\";\r\n\r\n// schema for expected environment variables\r\nconst envSchema = Joi.object({\r\n  MONGO_URI: Joi.string().uri().required().messages({\r\n    \"any.required\": \"MONGO_URI is required\",\r\n    \"string.uri\": \"MONGO_URI must be a valid URI\",\r\n  }),\r\n\r\n  ENCRYPTION_KEY: Joi.string().hex().length(64).required().messages({\r\n    \"any.required\": \"ENCRYPTION_KEY is required\",\r\n    \"string.length\": \"ENCRYPTION_KEY must be a 64-character hex string\",\r\n  }),\r\n\r\n  PORT: Joi.number().port().default(3000),\r\n\r\n  LOG_LEVEL: Joi.string()\r\n    .valid(\"error\", \"warn\", \"info\", \"debug\", \"trace\")\r\n    .default(\"info\"),\r\n\r\n  GITHUB_BASE_URL: Joi.string().uri().default(\"https://api.github.com\"),\r\n\r\n  CORS_ORIGIN: Joi.string()\r\n    .default(\"*\")\r\n    .messages({ \"string.base\": \"CORS_ORIGIN must be a string\" }),\r\n}).unknown(true); // allow other env vars\r\n\r\n// Validate process.env against schema\r\nconst { value: envVars, error } = envSchema.validate(process.env, {\r\n  abortEarly: false, // report all missing/invalid fields\r\n});\r\n\r\nif (error) {\r\n  throw new Error(\r\n    `Environment validation error: ${error.details\r\n      .map((d) => d.message)\r\n      .join(\", \")}`\r\n  );\r\n}\r\n\r\n// Export a structured config object\r\nexport const config = {\r\n  mongoUri: envVars.MONGO_URI as string,\r\n  encryptionKey: envVars.ENCRYPTION_KEY as string,\r\n  port: envVars.PORT as number,\r\n  logLevel: envVars.LOG_LEVEL as string,\r\n  githubBaseUrl: envVars.GITHUB_BASE_URL as string,\r\n  corsOrigin: envVars.CORS_ORIGIN as string,\r\n};\r\n\r\nlet _isConnected = false;\r\n\r\n/**\r\n * Method to connect mongodb, it checks for MONGO_URL env var\r\n *\r\n * @returns the connection status\r\n */\r\nexport async function connectMongo() {\r\n  logger.info(\"Connecting mongodb\");\r\n  if (_isConnected) {\r\n    logger.info(\"Already connected!\");\r\n    return true;\r\n  }\r\n  try {\r\n    const url = config.mongoUri as string;\r\n    await mongoose.connect(url, {\r\n      useNewUrlParser: true,\r\n      useUnifiedTopology: true,\r\n    } as mongoose.ConnectOptions);\r\n    _isConnected = true;\r\n    logger.info(\"connection successful\");\r\n    return true;\r\n  } catch (err) {\r\n    logger.error(\"Something failed\", err);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default mongoose;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9483b14bc59d90a2fae78248a557ffce90f92d45","contentHash":"e24960df8033abaec2f45d9961dbca1add95fd725a9f11736c66419be06e721e"},"D:\\projects\\github-pr-analytics\\src\\routes\\prRoutes.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\routes\\prRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":7,"column":18},"end":{"line":7,"column":53}},"4":{"start":{"line":9,"column":20},"end":{"line":9,"column":50}},"5":{"start":{"line":10,"column":23},"end":{"line":10,"column":61}},"6":{"start":{"line":11,"column":25},"end":{"line":11,"column":65}},"7":{"start":{"line":12,"column":23},"end":{"line":12,"column":61}},"8":{"start":{"line":13,"column":17},"end":{"line":13,"column":49}},"9":{"start":{"line":14,"column":26},"end":{"line":14,"column":67}},"10":{"start":{"line":15,"column":15},"end":{"line":15,"column":41}},"11":{"start":{"line":18,"column":0},"end":{"line":18,"column":214}},"12":{"start":{"line":21,"column":0},"end":{"line":21,"column":229}},"13":{"start":{"line":22,"column":0},"end":{"line":22,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/routes/prRoutes.ts","sources":["D:/projects/github-pr-analytics/src/routes/prRoutes.ts"],"names":[],"mappings":";;;;;AAAA,wBAAwB;AACxB,sDAA0C;AAE1C,wBAAwB;AACxB,mDAAoD;AACpD,8DAA8D;AAC9D,kEAAoE;AACpE,8DAGqC;AACrC,kDAAiE;AACjE,oEAAiE;AAEjE,MAAM,MAAM,GAAW,iBAAO,CAAC,MAAM,EAAE,CAAC;AAExC,0DAA0D;AAC1D,4FAA4F;AAC5F,MAAM,CAAC,GAAG,CACR,yBAAa,CAAC,GAAG,CAAC,IAAI,EACtB,oCAAmB,EACnB,IAAA,iCAAe,EAAC,kBAAS,CAAC,EAC1B,8BAAe,EACf,mCAAoB,CACrB,CAAC;AAEF,sEAAsE;AACtE,wDAAwD;AACxD,MAAM,CAAC,GAAG,CACR,yBAAa,CAAC,GAAG,CAAC,OAAO,EACzB,oCAAmB,EACnB,IAAA,iCAAe,EAAC,sBAAa,CAAC,EAC9B,8BAAe,EACf,2CAA4B,CAC7B,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["// external dependencies\r\nimport express, { Router } from \"express\";\r\n\r\n// internal dependencies\r\nimport { API_ENDPOINTS } from \"../common/constants\";\r\nimport { checkUserExists } from \"../middlewares/validateUser\";\r\nimport { authenticateWithPAT } from \"../middlewares/authMiddleware\";\r\nimport {\r\n  getOpenPRsController,\r\n  getPRTimingMetricsController,\r\n} from \"../controllers/prController\";\r\nimport { GetPrsDto, GetMetricsDto } from \"../common/dtos/pr.dto\";\r\nimport { validateRequest } from \"../middlewares/validateRequest\";\r\n\r\nconst router: Router = express.Router();\r\n\r\n// GET /prs/:developer/open - Get open PRs for a developer\r\n// this route provides open pull requests for a developer, optionally filtered by repository\r\nrouter.get(\r\n  API_ENDPOINTS.PRS.OPEN,\r\n  authenticateWithPAT,\r\n  validateRequest(GetPrsDto),\r\n  checkUserExists,\r\n  getOpenPRsController\r\n);\r\n\r\n// GET /prs/metrics/:developer - Get PR timing metrics for a developer\r\n// this route provides PR timing metrics for a developer\r\nrouter.get(\r\n  API_ENDPOINTS.PRS.METRICS,\r\n  authenticateWithPAT,\r\n  validateRequest(GetMetricsDto),\r\n  checkUserExists,\r\n  getPRTimingMetricsController\r\n);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3f7575c26b8facee7f6b939de3b69b85ac8de50b","contentHash":"3ab3579a13aad60ff63e1beae996a516bd293fe7a9fab4e3ab15cbfc98651587"},"D:\\projects\\github-pr-analytics\\src\\common\\constants.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\common\\constants.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":260}},"2":{"start":{"line":5,"column":0},"end":{"line":8,"column":3}},"3":{"start":{"line":10,"column":0},"end":{"line":22,"column":3}},"4":{"start":{"line":24,"column":0},"end":{"line":38,"column":3}},"5":{"start":{"line":40,"column":0},"end":{"line":40,"column":55}},"6":{"start":{"line":42,"column":0},"end":{"line":45,"column":3}},"7":{"start":{"line":47,"column":0},"end":{"line":50,"column":3}},"8":{"start":{"line":52,"column":0},"end":{"line":52,"column":28}},"9":{"start":{"line":54,"column":0},"end":{"line":67,"column":3}},"10":{"start":{"line":69,"column":0},"end":{"line":75,"column":54}},"11":{"start":{"line":70,"column":4},"end":{"line":70,"column":47}},"12":{"start":{"line":71,"column":4},"end":{"line":71,"column":41}},"13":{"start":{"line":72,"column":4},"end":{"line":72,"column":43}},"14":{"start":{"line":73,"column":4},"end":{"line":73,"column":49}},"15":{"start":{"line":74,"column":4},"end":{"line":74,"column":37}},"16":{"start":{"line":77,"column":0},"end":{"line":81,"column":3}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":69,"column":1},"end":{"line":69,"column":2}},"loc":{"start":{"line":69,"column":22},"end":{"line":75,"column":1}},"line":69}},"branchMap":{"0":{"loc":{"start":{"line":75,"column":3},"end":{"line":75,"column":52}},"type":"binary-expr","locations":[{"start":{"line":75,"column":3},"end":{"line":75,"column":12}},{"start":{"line":75,"column":17},"end":{"line":75,"column":51}}],"line":75}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1},"f":{"0":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/common/constants.ts","sources":["D:/projects/github-pr-analytics/src/common/constants.ts"],"names":[],"mappings":";;;AAAA,gDAAgD;AACnC,QAAA,kBAAkB,GAAG,MAAM,CAAC,MAAM,CAAC;IAC9C,KAAK,EAAE,EAAE;IACT,IAAI,EAAE,CAAC;CACR,CAAC,CAAC;AAEH,6BAA6B;AAChB,QAAA,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC;IACpC,SAAS,EAAE,IAAI;IACf,qBAAqB,EAAE,uBAAuB;IAC9C,aAAa,EAAE,iDAAiD;IAChE,aAAa,EAAE,kCAAkC;IACjD,YAAY,EAAE,4BAA4B;IAC1C,WAAW,EAAE,qBAAqB;IAClC,YAAY,EAAE,2BAA2B;IACzC,YAAY,EAAE,2BAA2B;IACzC,cAAc,EAAE,gBAAgB;IAChC,iBAAiB,EAAE,gCAAgC;IACnD,iBAAiB,EAAE,8BAA8B;CAClD,CAAC,CAAC;AAEH,yBAAyB;AACZ,QAAA,YAAY,GAA2B,MAAM,CAAC,MAAM,CAAC;IAChE,EAAE,EAAE,GAAG;IACP,OAAO,EAAE,GAAG;IACZ,OAAO,EAAE,GAAG;IACZ,SAAS,EAAE,GAAG;IACd,YAAY,EAAE,GAAG;IACjB,SAAS,EAAE,GAAG;IACd,qBAAqB,EAAE,GAAG;IAC1B,WAAW,EAAE,GAAG;IAChB,QAAQ,EAAE,GAAG;IACb,oBAAoB,EAAE,GAAG;IACzB,iBAAiB,EAAE,GAAG;IACtB,mBAAmB,EAAE,GAAG;IACxB,eAAe,EAAE,GAAG;CACrB,CAAC,CAAC;AAEH,sBAAsB;AACT,QAAA,mBAAmB,GAAG,wBAAwB,CAAC;AAE5D,0CAA0C;AAC7B,QAAA,kBAAkB,GAAG,MAAM,CAAC,MAAM,CAAC;IAC9C,MAAM,EAAE,gCAAgC;IACxC,cAAc,EAAE,kBAAkB;CACnC,CAAC,CAAC;AAEH,iCAAiC;AACpB,QAAA,qBAAqB,GAAG,MAAM,CAAC,MAAM,CAAC;IACjD,YAAY,EAAE,IAAI,EAAE,sCAAsC;IAC1D,UAAU,EAAE,IAAI,EAAI,mBAAmB;CACxC,CAAC,CAAC;AAEH,0CAA0C;AAC7B,QAAA,YAAY,GAAG,IAAI,CAAC;AAEjC,6CAA6C;AAChC,QAAA,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC;IACzC,YAAY,EAAE,SAAS;IACvB,GAAG,EAAE,MAAM;IACX,IAAI,EAAE,OAAO;IACb,GAAG,EAAE,MAAM,CAAC,MAAM,CAAC;QACjB,IAAI,EAAE,sBAAsB;QAC5B,OAAO,EAAE,yBAAyB;QAClC,SAAS,EAAE,gBAAgB;KAC5B,CAAC;IACF,IAAI,EAAE,QAAQ;IACd,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC;QACpB,MAAM,EAAE,gBAAgB;KACzB,CAAC;CACH,CAAC,CAAC;AAEH,IAAY,SAMX;AAND,WAAY,SAAS;IACnB,0CAA6B,CAAA;IAC7B,oCAAuB,CAAA;IACvB,sCAAyB,CAAA;IACzB,4CAA+B,CAAA;IAC/B,gCAAmB,CAAA;AACrB,CAAC,EANW,SAAS,yBAAT,SAAS,QAMpB;AAED,2CAA2C;AAC9B,QAAA,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC;IACzC,IAAI,EAAE,MAAM;IACZ,MAAM,EAAE,QAAQ;IAChB,MAAM,EAAE,QAAQ;CACjB,CAAC,CAAC","sourcesContent":["// default pagination settings for API endpoints\r\nexport const DEFAULT_PAGINATION = Object.freeze({\r\n  LIMIT: 10,\r\n  PAGE: 1,\r\n});\r\n\r\n// common error messages used\r\nexport const MESSAGES = Object.freeze({\r\n  STATUS_OK: 'OK',\r\n  INTERNAL_SERVER_ERROR: 'Internal Server Error',\r\n  MISSING_TOKEN: 'GitHub Personal Access Token (PAT) is required.',\r\n  INVALID_TOKEN: 'Invalid or expired GitHub token.',\r\n  AUTH_SUCCESS: 'Authenticated successfully',\r\n  USER_EXISTS: 'User already exists',\r\n  USER_CREATED: 'User created successfully',\r\n  USER_DELETED: 'User deleted successfully',\r\n  USER_NOT_FOUND: 'User not found',\r\n  MISSING_DEVELOPER: 'Developer username is required',\r\n  UNAUTHORIZED_USER: 'Unauthorized GitHub username',\r\n});\r\n\r\n// HTTP status codes used\r\nexport const STATUS_CODES: Record<string, number> = Object.freeze({\r\n  OK: 200,\r\n  CREATED: 201,\r\n  DELETED: 204,\r\n  NOT_FOUND: 404,\r\n  UNAUTHORIZED: 401,\r\n  FORBIDDEN: 403,\r\n  INTERNAL_SERVER_ERROR: 500,\r\n  BAD_REQUEST: 400,\r\n  CONFLICT: 409,\r\n  UNPROCESSABLE_ENTITY: 422,\r\n  TOO_MANY_REQUESTS: 429,\r\n  SERVICE_UNAVAILABLE: 503,\r\n  GATEWAY_TIMEOUT: 504,\r\n});\r\n\r\n// gitHub API base URL\r\nexport const GITHUB_API_BASE_URL = \"https://api.github.com\";\r\n\r\n// default headers for GitHub API requests\r\nexport const GITHUB_API_HEADERS = Object.freeze({\r\n  Accept: \"application/vnd.github.v3+json\",\r\n  \"Content-Type\": \"application/json\",\r\n});\r\n\r\n// gitHub API rate limit settings\r\nexport const GITHUB_API_RATE_LIMIT = Object.freeze({\r\n  MAX_REQUESTS: 5000, // per hour for authenticated requests\r\n  RESET_TIME: 3600,   // seconds (1 hour)\r\n});\r\n\r\n// default port for the application server\r\nexport const DEFAULT_PORT = 3000;\r\n\r\n// API endpoint paths used in the application\r\nexport const API_ENDPOINTS = Object.freeze({\r\n  HEALTH_CHECK: \"/health\",\r\n  API: \"/api\",\r\n  AUTH: \"/auth\",\r\n  PRS: Object.freeze({\r\n    OPEN: \"/prs/:developer/open\",\r\n    METRICS: \"/prs/metrics/:developer\",\r\n    ANALYTICS: \"/prs/analytics\"\r\n  }),\r\n  USER: \"/users\",\r\n  SEARCH: Object.freeze({\r\n    ISSUES: \"/search/issues\"\r\n  })\r\n});\r\n\r\nexport enum DB_STATES {\r\n  DISCONNECTED = \"disconnected\",\r\n  CONNECTED = \"connected\",\r\n  CONNECTING = \"connecting\",\r\n  DISCONNECTING = \"disconnecting\",\r\n  UNKNOWN = \"unknown\"\r\n}\r\n\r\n// possible states for GitHub pull requests\r\nexport const GITHUB_STATES = Object.freeze({\r\n  OPEN: \"open\",\r\n  CLOSED: \"closed\",\r\n  MERGED: \"merged\"\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7e8aedc06e2f810058b72b2d00df96890bf9edff","contentHash":"395088a33a74c13088bd9cd2f0de5005df2303cc4b356d157add7ad0a2d4b408"},"D:\\projects\\github-pr-analytics\\src\\middlewares\\validateUser.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\middlewares\\validateUser.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":33}},"16":{"start":{"line":17,"column":15},"end":{"line":17,"column":57}},"17":{"start":{"line":18,"column":20},"end":{"line":18,"column":50}},"18":{"start":{"line":27,"column":24},"end":{"line":46,"column":2}},"19":{"start":{"line":27,"column":44},"end":{"line":46,"column":2}},"20":{"start":{"line":28,"column":4},"end":{"line":45,"column":5}},"21":{"start":{"line":29,"column":25},"end":{"line":29,"column":68}},"22":{"start":{"line":30,"column":8},"end":{"line":33,"column":9}},"23":{"start":{"line":31,"column":12},"end":{"line":31,"column":117}},"24":{"start":{"line":32,"column":12},"end":{"line":32,"column":19}},"25":{"start":{"line":34,"column":21},"end":{"line":34,"column":63}},"26":{"start":{"line":35,"column":8},"end":{"line":38,"column":9}},"27":{"start":{"line":36,"column":12},"end":{"line":36,"column":112}},"28":{"start":{"line":37,"column":12},"end":{"line":37,"column":19}},"29":{"start":{"line":40,"column":8},"end":{"line":40,"column":15}},"30":{"start":{"line":43,"column":20},"end":{"line":43,"column":25}},"31":{"start":{"line":44,"column":8},"end":{"line":44,"column":142}},"32":{"start":{"line":47,"column":0},"end":{"line":47,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":27,"column":24},"end":{"line":27,"column":25}},"loc":{"start":{"line":27,"column":44},"end":{"line":46,"column":2}},"line":27},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":78},"end":{"line":27,"column":79}},"loc":{"start":{"line":27,"column":91},"end":{"line":46,"column":1}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":29,"column":25},"end":{"line":29,"column":68}},"type":"binary-expr","locations":[{"start":{"line":29,"column":25},"end":{"line":29,"column":45}},{"start":{"line":29,"column":49},"end":{"line":29,"column":68}}],"line":29},"9":{"loc":{"start":{"line":30,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":33,"column":9}},{"start":{},"end":{}}],"line":30},"10":{"loc":{"start":{"line":35,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":38,"column":9}},{"start":{},"end":{}}],"line":35},"11":{"loc":{"start":{"line":44,"column":81},"end":{"line":44,"column":138}},"type":"binary-expr","locations":[{"start":{"line":44,"column":81},"end":{"line":44,"column":92}},{"start":{"line":44,"column":96},"end":{"line":44,"column":138}}],"line":44}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/middlewares/validateUser.ts","sources":["D:/projects/github-pr-analytics/src/middlewares/validateUser.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAGA,wBAAwB;AACxB,0DAAkC;AAElC,mDAA6D;AAE7D;;;;;;;GAOG;AACI,MAAM,eAAe,GAAG,CAC7B,GAAY,EACZ,GAAa,EACb,IAAkB,EACH,EAAE;IACjB,IAAI,CAAC;QACH,MAAM,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC;QAC7D,IAAI,CAAC,QAAQ,EAAE,CAAC;YACd,GAAG,CAAC,MAAM,CAAC,wBAAY,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,oBAAQ,CAAC,iBAAiB,EAAE,CAAC,CAAC;YACjF,OAAO;QACT,CAAC;QAED,MAAM,IAAI,GAAG,MAAM,cAAI,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC;QAC9C,IAAI,CAAC,IAAI,EAAE,CAAC;YACV,GAAG,CAAC,MAAM,CAAC,wBAAY,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,oBAAQ,CAAC,cAAc,EAAE,CAAC,CAAC;YAC5E,OAAO;QACT,CAAC;QAED,yDAAyD;QACzD,IAAI,EAAE,CAAC;IACT,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,MAAM,GAAG,GAAG,KAAiB,CAAC;QAC9B,GAAG,CAAC,MAAM,CAAC,wBAAY,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,GAAG,CAAC,OAAO,IAAI,oBAAQ,CAAC,qBAAqB,EAAE,CAAC,CAAC;IAChH,CAAC;AACH,CAAC,CAAA,CAAC;AAxBW,QAAA,eAAe,mBAwB1B","sourcesContent":["// external dependencies\r\nimport { Request, Response, NextFunction } from \"express\";\r\n\r\n// internal dependencies\r\nimport User from \"../models/user\";\r\nimport { APIError } from \"../common/types\";\r\nimport { MESSAGES, STATUS_CODES } from \"../common/constants\";\r\n\r\n/**\r\n * Middleware to check if a developer (user) exists in the database\r\n *\r\n * @param req - express request object\r\n * @param res - express response object\r\n * @param next - next middleware function\r\n * @returns promise that resolves to void\r\n */\r\nexport const checkUserExists = async (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n): Promise<void> => {\r\n  try {\r\n    const userName = req.params.developer || req.query.developer;\r\n    if (!userName) {\r\n      res.status(STATUS_CODES.BAD_REQUEST).json({ error: MESSAGES.MISSING_DEVELOPER });\r\n      return;\r\n    }\r\n\r\n    const user = await User.findOne({ userName });\r\n    if (!user) {\r\n      res.status(STATUS_CODES.NOT_FOUND).json({ error: MESSAGES.USER_NOT_FOUND });\r\n      return;\r\n    }\r\n\r\n    // user exists, proceed to the next middleware/controller\r\n    next();\r\n  } catch (error) {\r\n    const err = error as APIError;\r\n    res.status(STATUS_CODES.INTERNAL_SERVER_ERROR).json({ error: err.message || MESSAGES.INTERNAL_SERVER_ERROR });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"de34fed62147317526f5322affbf0a3ebaadc9bc","contentHash":"c7cd3c46eb3a36b71ad307959f18438092fd3008a0be32aed09dac6892e0f598"},"D:\\projects\\github-pr-analytics\\src\\models\\user.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\models\\user.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"15":{"start":{"line":19,"column":18},"end":{"line":26,"column":5}},"16":{"start":{"line":20,"column":8},"end":{"line":24,"column":10}},"17":{"start":{"line":21,"column":21},"end":{"line":21,"column":23}},"18":{"start":{"line":22,"column":12},"end":{"line":22,"column":95}},"19":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"20":{"start":{"line":22,"column":77},"end":{"line":22,"column":95}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":22}},"22":{"start":{"line":25,"column":8},"end":{"line":25,"column":26}},"23":{"start":{"line":27,"column":4},"end":{"line":33,"column":6}},"24":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"25":{"start":{"line":28,"column":35},"end":{"line":28,"column":46}},"26":{"start":{"line":29,"column":21},"end":{"line":29,"column":23}},"27":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"28":{"start":{"line":30,"column":25},"end":{"line":30,"column":137}},"29":{"start":{"line":30,"column":38},"end":{"line":30,"column":50}},"30":{"start":{"line":30,"column":56},"end":{"line":30,"column":57}},"31":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"32":{"start":{"line":30,"column":102},"end":{"line":30,"column":137}},"33":{"start":{"line":31,"column":8},"end":{"line":31,"column":40}},"34":{"start":{"line":32,"column":8},"end":{"line":32,"column":22}},"35":{"start":{"line":35,"column":0},"end":{"line":35,"column":62}},"36":{"start":{"line":37,"column":19},"end":{"line":37,"column":52}},"37":{"start":{"line":39,"column":19},"end":{"line":57,"column":24}},"38":{"start":{"line":58,"column":13},"end":{"line":58,"column":57}},"39":{"start":{"line":59,"column":0},"end":{"line":59,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":51},"end":{"line":18,"column":52}},"loc":{"start":{"line":18,"column":63},"end":{"line":34,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":19,"column":18},"end":{"line":19,"column":19}},"loc":{"start":{"line":19,"column":30},"end":{"line":26,"column":5}},"line":19},"7":{"name":"(anonymous_7)","decl":{"start":{"line":20,"column":48},"end":{"line":20,"column":49}},"loc":{"start":{"line":20,"column":61},"end":{"line":24,"column":9}},"line":20},"8":{"name":"(anonymous_8)","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":12}},"loc":{"start":{"line":27,"column":26},"end":{"line":33,"column":5}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{},"end":{}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{},"end":{}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{},"end":{}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":34,"column":4}}],"line":18},"11":{"loc":{"start":{"line":20,"column":18},"end":{"line":24,"column":9}},"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":44}},{"start":{"line":20,"column":48},"end":{"line":24,"column":9}}],"line":20},"12":{"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"type":"if","locations":[{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},{"start":{},"end":{}}],"line":22},"13":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},{"start":{},"end":{}}],"line":28},"14":{"loc":{"start":{"line":28,"column":12},"end":{"line":28,"column":33}},"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":15}},{"start":{"line":28,"column":19},"end":{"line":28,"column":33}}],"line":28},"15":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"16":{"loc":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30}},"s":{"0":1,"1":53,"2":53,"3":53,"4":53,"5":52,"6":1,"7":53,"8":0,"9":0,"10":0,"11":1,"12":1,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":1,"24":1,"25":0,"26":1,"27":1,"28":1,"29":1,"30":1,"31":54,"32":53,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1},"f":{"0":53,"1":1,"2":0,"3":1,"4":0,"5":1,"6":1,"7":0,"8":1},"b":{"0":[1,1,1],"1":[1,0],"2":[53,0],"3":[52,1],"4":[53,53],"5":[0,53],"6":[53,1],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[0,0],"13":[0,1],"14":[1,1],"15":[1,0],"16":[53,1]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/models/user.ts","sources":["D:/projects/github-pr-analytics/src/models/user.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wBAAwB;AACxB,qDAA6D;AAa7D,cAAc;AACd,MAAM,UAAU,GAAkB,IAAI,iBAAM,CAC1C;IACA,QAAQ,EAAE;QACR,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,IAAI;KACX;IACC,KAAK,EAAE;QACL,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,KAAK;QACf,IAAI,EAAE,IAAI;QACV,SAAS,EAAE,IAAI;KAChB;IACH,YAAY,EAAE;QACZ,EAAE,EAAK,EAAE,IAAI,EAAE,MAAM,EAAE;QACvB,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE;QACzB,GAAG,EAAI,EAAE,IAAI,EAAE,MAAM,EAAE;KACxB;CACF,EACC,EAAE,UAAU,EAAE,IAAI,EAAE,CACrB,CAAC;AAEF,MAAM,IAAI,GAAiB,kBAAQ,CAAC,KAAK,CAAQ,MAAM,EAAE,UAAU,CAAC,CAAC;AACrE,kBAAe,IAAI,CAAC","sourcesContent":["// external dependencies\r\nimport mongoose, { Schema, Document, Model } from \"mongoose\";\r\n\r\n// mongoose document interface for a User\r\nexport interface IUser extends Document {\r\n  userName: string;\r\n  email?: string;\r\n  encryptedPat?: {\r\n    iv: string;\r\n    content: string;\r\n    tag: string;\r\n  };\r\n}\r\n\r\n// user schema\r\nconst userSchema: Schema<IUser> = new Schema<IUser>(\r\n  {\r\n  userName: {\r\n    type: String,\r\n    required: true,\r\n    unique: true,\r\n    trim: true\r\n  },\r\n    email: {\r\n      type: String,\r\n      required: false,\r\n      trim: true,\r\n      lowercase: true,\r\n    },\r\n  encryptedPat: {\r\n    iv:    { type: String },\r\n    content: { type: String },\r\n    tag:   { type: String },\r\n  }\r\n},\r\n  { timestamps: true }\r\n);\r\n\r\nconst User: Model<IUser> = mongoose.model<IUser>(\"User\", userSchema);\r\nexport default User;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"637aca550c74137120fd552e04e15ff0ed635bbc","contentHash":"2249e0e4887bbfa476d509489b12374609fe70b913c18bb379d57cc694cd7ebd"},"D:\\projects\\github-pr-analytics\\src\\middlewares\\authMiddleware.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\middlewares\\authMiddleware.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"15":{"start":{"line":19,"column":18},"end":{"line":26,"column":5}},"16":{"start":{"line":20,"column":8},"end":{"line":24,"column":10}},"17":{"start":{"line":21,"column":21},"end":{"line":21,"column":23}},"18":{"start":{"line":22,"column":12},"end":{"line":22,"column":95}},"19":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"20":{"start":{"line":22,"column":77},"end":{"line":22,"column":95}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":22}},"22":{"start":{"line":25,"column":8},"end":{"line":25,"column":26}},"23":{"start":{"line":27,"column":4},"end":{"line":33,"column":6}},"24":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"25":{"start":{"line":28,"column":35},"end":{"line":28,"column":46}},"26":{"start":{"line":29,"column":21},"end":{"line":29,"column":23}},"27":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"28":{"start":{"line":30,"column":25},"end":{"line":30,"column":137}},"29":{"start":{"line":30,"column":38},"end":{"line":30,"column":50}},"30":{"start":{"line":30,"column":56},"end":{"line":30,"column":57}},"31":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"32":{"start":{"line":30,"column":102},"end":{"line":30,"column":137}},"33":{"start":{"line":31,"column":8},"end":{"line":31,"column":40}},"34":{"start":{"line":32,"column":8},"end":{"line":32,"column":22}},"35":{"start":{"line":35,"column":16},"end":{"line":43,"column":1}},"36":{"start":{"line":36,"column":28},"end":{"line":36,"column":110}},"37":{"start":{"line":36,"column":91},"end":{"line":36,"column":106}},"38":{"start":{"line":37,"column":4},"end":{"line":42,"column":7}},"39":{"start":{"line":38,"column":36},"end":{"line":38,"column":97}},"40":{"start":{"line":38,"column":42},"end":{"line":38,"column":70}},"41":{"start":{"line":38,"column":85},"end":{"line":38,"column":95}},"42":{"start":{"line":39,"column":35},"end":{"line":39,"column":100}},"43":{"start":{"line":39,"column":41},"end":{"line":39,"column":73}},"44":{"start":{"line":39,"column":88},"end":{"line":39,"column":98}},"45":{"start":{"line":40,"column":32},"end":{"line":40,"column":116}},"46":{"start":{"line":41,"column":8},"end":{"line":41,"column":78}},"47":{"start":{"line":44,"column":22},"end":{"line":46,"column":1}},"48":{"start":{"line":45,"column":4},"end":{"line":45,"column":62}},"49":{"start":{"line":47,"column":0},"end":{"line":47,"column":62}},"50":{"start":{"line":48,"column":0},"end":{"line":48,"column":37}},"51":{"start":{"line":50,"column":20},"end":{"line":50,"column":50}},"52":{"start":{"line":51,"column":17},"end":{"line":51,"column":60}},"53":{"start":{"line":55,"column":28},"end":{"line":84,"column":2}},"54":{"start":{"line":55,"column":48},"end":{"line":84,"column":2}},"55":{"start":{"line":57,"column":23},"end":{"line":57,"column":48}},"56":{"start":{"line":58,"column":4},"end":{"line":61,"column":5}},"57":{"start":{"line":59,"column":8},"end":{"line":59,"column":110}},"58":{"start":{"line":60,"column":8},"end":{"line":60,"column":15}},"59":{"start":{"line":62,"column":16},"end":{"line":62,"column":100}},"60":{"start":{"line":63,"column":4},"end":{"line":66,"column":5}},"61":{"start":{"line":64,"column":8},"end":{"line":64,"column":110}},"62":{"start":{"line":65,"column":8},"end":{"line":65,"column":15}},"63":{"start":{"line":67,"column":4},"end":{"line":83,"column":5}},"64":{"start":{"line":69,"column":28},"end":{"line":69,"column":102}},"65":{"start":{"line":69,"column":63},"end":{"line":69,"column":101}},"66":{"start":{"line":70,"column":24},"end":{"line":70,"column":50}},"67":{"start":{"line":71,"column":25},"end":{"line":71,"column":63}},"68":{"start":{"line":72,"column":8},"end":{"line":72,"column":50}},"69":{"start":{"line":73,"column":8},"end":{"line":76,"column":10}},"70":{"start":{"line":77,"column":8},"end":{"line":77,"column":15}},"71":{"start":{"line":80,"column":20},"end":{"line":80,"column":25}},"72":{"start":{"line":81,"column":8},"end":{"line":81,"column":81}},"73":{"start":{"line":82,"column":8},"end":{"line":82,"column":110}},"74":{"start":{"line":85,"column":0},"end":{"line":85,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":51},"end":{"line":18,"column":52}},"loc":{"start":{"line":18,"column":63},"end":{"line":34,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":19,"column":18},"end":{"line":19,"column":19}},"loc":{"start":{"line":19,"column":30},"end":{"line":26,"column":5}},"line":19},"7":{"name":"(anonymous_7)","decl":{"start":{"line":20,"column":48},"end":{"line":20,"column":49}},"loc":{"start":{"line":20,"column":61},"end":{"line":24,"column":9}},"line":20},"8":{"name":"(anonymous_8)","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":12}},"loc":{"start":{"line":27,"column":26},"end":{"line":33,"column":5}},"line":27},"9":{"name":"(anonymous_9)","decl":{"start":{"line":35,"column":44},"end":{"line":35,"column":45}},"loc":{"start":{"line":35,"column":89},"end":{"line":43,"column":1}},"line":35},"10":{"name":"adopt","decl":{"start":{"line":36,"column":13},"end":{"line":36,"column":18}},"loc":{"start":{"line":36,"column":26},"end":{"line":36,"column":112}},"line":36},"11":{"name":"(anonymous_11)","decl":{"start":{"line":36,"column":70},"end":{"line":36,"column":71}},"loc":{"start":{"line":36,"column":89},"end":{"line":36,"column":108}},"line":36},"12":{"name":"(anonymous_12)","decl":{"start":{"line":37,"column":36},"end":{"line":37,"column":37}},"loc":{"start":{"line":37,"column":63},"end":{"line":42,"column":5}},"line":37},"13":{"name":"fulfilled","decl":{"start":{"line":38,"column":17},"end":{"line":38,"column":26}},"loc":{"start":{"line":38,"column":34},"end":{"line":38,"column":99}},"line":38},"14":{"name":"rejected","decl":{"start":{"line":39,"column":17},"end":{"line":39,"column":25}},"loc":{"start":{"line":39,"column":33},"end":{"line":39,"column":102}},"line":39},"15":{"name":"step","decl":{"start":{"line":40,"column":17},"end":{"line":40,"column":21}},"loc":{"start":{"line":40,"column":30},"end":{"line":40,"column":118}},"line":40},"16":{"name":"(anonymous_16)","decl":{"start":{"line":44,"column":56},"end":{"line":44,"column":57}},"loc":{"start":{"line":44,"column":71},"end":{"line":46,"column":1}},"line":44},"17":{"name":"(anonymous_17)","decl":{"start":{"line":55,"column":28},"end":{"line":55,"column":29}},"loc":{"start":{"line":55,"column":48},"end":{"line":84,"column":2}},"line":55},"18":{"name":"(anonymous_18)","decl":{"start":{"line":55,"column":82},"end":{"line":55,"column":83}},"loc":{"start":{"line":55,"column":95},"end":{"line":84,"column":1}},"line":55},"19":{"name":"(anonymous_19)","decl":{"start":{"line":69,"column":57},"end":{"line":69,"column":58}},"loc":{"start":{"line":69,"column":63},"end":{"line":69,"column":101}},"line":69}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{},"end":{}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{},"end":{}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{},"end":{}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":34,"column":4}}],"line":18},"11":{"loc":{"start":{"line":20,"column":18},"end":{"line":24,"column":9}},"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":44}},{"start":{"line":20,"column":48},"end":{"line":24,"column":9}}],"line":20},"12":{"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"type":"if","locations":[{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},{"start":{},"end":{}}],"line":22},"13":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},{"start":{},"end":{}}],"line":28},"14":{"loc":{"start":{"line":28,"column":12},"end":{"line":28,"column":33}},"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":15}},{"start":{"line":28,"column":19},"end":{"line":28,"column":33}}],"line":28},"15":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"16":{"loc":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"17":{"loc":{"start":{"line":35,"column":16},"end":{"line":43,"column":1}},"type":"binary-expr","locations":[{"start":{"line":35,"column":17},"end":{"line":35,"column":21}},{"start":{"line":35,"column":25},"end":{"line":35,"column":39}},{"start":{"line":35,"column":44},"end":{"line":43,"column":1}}],"line":35},"18":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":109}},"type":"cond-expr","locations":[{"start":{"line":36,"column":56},"end":{"line":36,"column":61}},{"start":{"line":36,"column":64},"end":{"line":36,"column":109}}],"line":36},"19":{"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":34}},"type":"binary-expr","locations":[{"start":{"line":37,"column":16},"end":{"line":37,"column":17}},{"start":{"line":37,"column":22},"end":{"line":37,"column":33}}],"line":37},"20":{"loc":{"start":{"line":40,"column":32},"end":{"line":40,"column":115}},"type":"cond-expr","locations":[{"start":{"line":40,"column":46},"end":{"line":40,"column":67}},{"start":{"line":40,"column":70},"end":{"line":40,"column":115}}],"line":40},"21":{"loc":{"start":{"line":41,"column":51},"end":{"line":41,"column":67}},"type":"binary-expr","locations":[{"start":{"line":41,"column":51},"end":{"line":41,"column":61}},{"start":{"line":41,"column":65},"end":{"line":41,"column":67}}],"line":41},"22":{"loc":{"start":{"line":44,"column":22},"end":{"line":46,"column":1}},"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":27}},{"start":{"line":44,"column":31},"end":{"line":44,"column":51}},{"start":{"line":44,"column":56},"end":{"line":46,"column":1}}],"line":44},"23":{"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":61}},"type":"cond-expr","locations":[{"start":{"line":45,"column":37},"end":{"line":45,"column":40}},{"start":{"line":45,"column":43},"end":{"line":45,"column":61}}],"line":45},"24":{"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":33}},"type":"binary-expr","locations":[{"start":{"line":45,"column":12},"end":{"line":45,"column":15}},{"start":{"line":45,"column":19},"end":{"line":45,"column":33}}],"line":45},"25":{"loc":{"start":{"line":58,"column":4},"end":{"line":61,"column":5}},"type":"if","locations":[{"start":{"line":58,"column":4},"end":{"line":61,"column":5}},{"start":{},"end":{}}],"line":58},"26":{"loc":{"start":{"line":58,"column":10},"end":{"line":58,"column":98}},"type":"cond-expr","locations":[{"start":{"line":58,"column":57},"end":{"line":58,"column":63}},{"start":{"line":58,"column":66},"end":{"line":58,"column":98}}],"line":58},"27":{"loc":{"start":{"line":58,"column":10},"end":{"line":58,"column":54}},"type":"binary-expr","locations":[{"start":{"line":58,"column":10},"end":{"line":58,"column":29}},{"start":{"line":58,"column":33},"end":{"line":58,"column":54}}],"line":58},"28":{"loc":{"start":{"line":62,"column":16},"end":{"line":62,"column":100}},"type":"cond-expr","locations":[{"start":{"line":62,"column":82},"end":{"line":62,"column":88}},{"start":{"line":62,"column":91},"end":{"line":62,"column":100}}],"line":62},"29":{"loc":{"start":{"line":62,"column":16},"end":{"line":62,"column":79}},"type":"binary-expr","locations":[{"start":{"line":62,"column":16},"end":{"line":62,"column":62}},{"start":{"line":62,"column":66},"end":{"line":62,"column":79}}],"line":62},"30":{"loc":{"start":{"line":63,"column":4},"end":{"line":66,"column":5}},"type":"if","locations":[{"start":{"line":63,"column":4},"end":{"line":66,"column":5}},{"start":{},"end":{}}],"line":63}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[1,1,1],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[1,1,1],"23":[1,0],"24":[1,1],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/middlewares/authMiddleware.ts","sources":["D:/projects/github-pr-analytics/src/middlewares/authMiddleware.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,wBAAwB;AACxB,mDAA6D;AAE7D,6DAAqC;AAErC;;GAEG;AACI,MAAM,mBAAmB,GAAG,CACjC,GAAyB,EACzB,GAAa,EACb,IAAkB,EAClB,EAAE;;IACF,MAAM,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC;IAE7C,IAAI,CAAC,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,UAAU,CAAC,SAAS,CAAC,CAAA,EAAE,CAAC;QACvC,GAAG,CAAC,MAAM,CAAC,wBAAY,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,oBAAQ,CAAC,aAAa,EAAE,CAAC,CAAC;QAC9E,OAAO;IACT,CAAC;IAED,MAAM,GAAG,GAAG,MAAA,UAAU,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,0CAAE,IAAI,EAAE,CAAC;IACnD,IAAI,CAAC,GAAG,EAAE,CAAC;QACT,GAAG,CAAC,MAAM,CAAC,wBAAY,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,oBAAQ,CAAC,aAAa,EAAE,CAAC,CAAC;QAC9E,OAAO;IACT,CAAC;IAED,IAAI,CAAC;QACH,2DAA2D;QAC3D,MAAM,EAAE,OAAO,EAAE,GAAG,wDAAa,eAAe,GAAC,CAAC;QAClD,MAAM,OAAO,GAAG,IAAI,OAAO,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;QAE3C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,OAAO,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;QACxD,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;QAE1C,GAAG,CAAC,IAAI,GAAG;YACT,QAAQ,EAAE,IAAI,CAAC,KAAK;YACpB,KAAK,EAAE,GAAG;SACX,CAAC;QAEF,IAAI,EAAE,CAAC;IACT,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,MAAM,GAAG,GAAG,KAAiB,CAAC;QAC9B,gBAAM,CAAC,KAAK,CAAC,mCAAmC,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;QAC/D,GAAG,CAAC,MAAM,CAAC,wBAAY,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,oBAAQ,CAAC,aAAa,EAAE,CAAC,CAAC;IAChF,CAAC;AACH,CAAC,CAAA,CAAC;AArCW,QAAA,mBAAmB,uBAqC9B","sourcesContent":["import { Response, NextFunction } from \"express\";\r\n\r\n// internal dependencies\r\nimport { STATUS_CODES, MESSAGES } from \"../common/constants\";\r\nimport { APIError, AuthenticatedRequest } from \"../common/types\";\r\nimport logger from \"../utils/logger\";\r\n\r\n/**\r\n * Middleware to authenticate requests using GitHub Personal Access Token (PAT)\r\n */\r\nexport const authenticateWithPAT = async (\r\n  req: AuthenticatedRequest,\r\n  res: Response,\r\n  next: NextFunction\r\n) => {\r\n  const authHeader = req.headers.authorization;\r\n\r\n  if (!authHeader?.startsWith(\"Bearer \")) {\r\n    res.status(STATUS_CODES.UNAUTHORIZED).json({ error: MESSAGES.MISSING_TOKEN });\r\n    return;\r\n  }\r\n\r\n  const pat = authHeader.split(\"Bearer \")[1]?.trim();\r\n  if (!pat) {\r\n    res.status(STATUS_CODES.UNAUTHORIZED).json({ error: MESSAGES.INVALID_TOKEN });\r\n    return;\r\n  }\r\n\r\n  try {\r\n    //  Dynamically import Octokit to support ESM in CommonJS\r\n    const { Octokit } = await import(\"@octokit/rest\");\r\n    const octokit = new Octokit({ auth: pat });\r\n\r\n    const { data } = await octokit.users.getAuthenticated();\r\n    console.log(\"data\", JSON.stringify(data));\r\n\r\n    req.user = {\r\n      username: data.login,\r\n      token: pat,\r\n    };\r\n\r\n    next();\r\n  } catch (error) {\r\n    const err = error as APIError;\r\n    logger.error(\"GitHub PAT authentication failed:\", err.message);\r\n    res.status(STATUS_CODES.UNAUTHORIZED).json({ error: MESSAGES.INVALID_TOKEN });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dde8dee6c4b6e3b39ca119e91e22034c90d71f36","contentHash":"67b8126e16df4c139fbd217b2a72015e32bb85474d567d1a34cc24f5fbe9a509"},"D:\\projects\\github-pr-analytics\\src\\controllers\\prController.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\controllers\\prController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":77}},"16":{"start":{"line":16,"column":16},"end":{"line":16,"column":41}},"17":{"start":{"line":18,"column":24},"end":{"line":18,"column":60}},"18":{"start":{"line":19,"column":20},"end":{"line":19,"column":50}},"19":{"start":{"line":20,"column":17},"end":{"line":20,"column":60}},"20":{"start":{"line":29,"column":29},"end":{"line":84,"column":2}},"21":{"start":{"line":29,"column":43},"end":{"line":84,"column":2}},"22":{"start":{"line":30,"column":26},"end":{"line":30,"column":36}},"23":{"start":{"line":31,"column":112},"end":{"line":31,"column":121}},"24":{"start":{"line":32,"column":17},"end":{"line":32,"column":25}},"25":{"start":{"line":33,"column":4},"end":{"line":38,"column":5}},"26":{"start":{"line":34,"column":8},"end":{"line":36,"column":69}},"27":{"start":{"line":37,"column":8},"end":{"line":37,"column":15}},"28":{"start":{"line":39,"column":20},"end":{"line":39,"column":86}},"29":{"start":{"line":40,"column":21},"end":{"line":40,"column":89}},"30":{"start":{"line":41,"column":4},"end":{"line":83,"column":5}},"31":{"start":{"line":43,"column":25},"end":{"line":48,"column":10}},"32":{"start":{"line":49,"column":23},"end":{"line":49,"column":50}},"33":{"start":{"line":50,"column":8},"end":{"line":56,"column":9}},"34":{"start":{"line":51,"column":12},"end":{"line":53,"column":61}},"35":{"start":{"line":54,"column":12},"end":{"line":54,"column":51}},"36":{"start":{"line":55,"column":12},"end":{"line":55,"column":19}},"37":{"start":{"line":57,"column":23},"end":{"line":59,"column":96}},"38":{"start":{"line":60,"column":26},"end":{"line":60,"column":84}},"39":{"start":{"line":62,"column":8},"end":{"line":62,"column":51}},"40":{"start":{"line":63,"column":8},"end":{"line":63,"column":95}},"41":{"start":{"line":66,"column":20},"end":{"line":66,"column":25}},"42":{"start":{"line":67,"column":8},"end":{"line":77,"column":9}},"43":{"start":{"line":68,"column":30},"end":{"line":68,"column":66}},"44":{"start":{"line":69,"column":26},"end":{"line":69,"column":58}},"45":{"start":{"line":70,"column":12},"end":{"line":76,"column":13}},"46":{"start":{"line":71,"column":34},"end":{"line":71,"column":64}},"47":{"start":{"line":72,"column":28},"end":{"line":72,"column":97}},"48":{"start":{"line":73,"column":16},"end":{"line":73,"column":73}},"49":{"start":{"line":74,"column":16},"end":{"line":74,"column":92}},"50":{"start":{"line":75,"column":16},"end":{"line":75,"column":23}},"51":{"start":{"line":78,"column":8},"end":{"line":78,"column":65}},"52":{"start":{"line":79,"column":8},"end":{"line":81,"column":88}},"53":{"start":{"line":82,"column":8},"end":{"line":82,"column":15}},"54":{"start":{"line":85,"column":0},"end":{"line":85,"column":52}},"55":{"start":{"line":94,"column":37},"end":{"line":167,"column":2}},"56":{"start":{"line":94,"column":51},"end":{"line":167,"column":2}},"57":{"start":{"line":95,"column":26},"end":{"line":95,"column":36}},"58":{"start":{"line":96,"column":17},"end":{"line":96,"column":25}},"59":{"start":{"line":97,"column":4},"end":{"line":102,"column":5}},"60":{"start":{"line":98,"column":8},"end":{"line":100,"column":69}},"61":{"start":{"line":101,"column":8},"end":{"line":101,"column":15}},"62":{"start":{"line":103,"column":18},"end":{"line":103,"column":28}},"63":{"start":{"line":104,"column":4},"end":{"line":166,"column":5}},"64":{"start":{"line":106,"column":25},"end":{"line":106,"column":82}},"65":{"start":{"line":107,"column":23},"end":{"line":107,"column":50}},"66":{"start":{"line":108,"column":8},"end":{"line":112,"column":9}},"67":{"start":{"line":109,"column":12},"end":{"line":109,"column":65}},"68":{"start":{"line":110,"column":12},"end":{"line":110,"column":51}},"69":{"start":{"line":111,"column":12},"end":{"line":111,"column":19}},"70":{"start":{"line":113,"column":23},"end":{"line":113,"column":95}},"71":{"start":{"line":114,"column":20},"end":{"line":114,"column":40}},"72":{"start":{"line":115,"column":32},"end":{"line":115,"column":34}},"73":{"start":{"line":116,"column":38},"end":{"line":131,"column":24}},"74":{"start":{"line":117,"column":28},"end":{"line":117,"column":71}},"75":{"start":{"line":119,"column":33},"end":{"line":119,"column":71}},"76":{"start":{"line":120,"column":12},"end":{"line":128,"column":14}},"77":{"start":{"line":130,"column":28},"end":{"line":130,"column":93}},"78":{"start":{"line":132,"column":8},"end":{"line":138,"column":9}},"79":{"start":{"line":133,"column":28},"end":{"line":133,"column":60}},"80":{"start":{"line":134,"column":12},"end":{"line":137,"column":13}},"81":{"start":{"line":135,"column":31},"end":{"line":135,"column":62}},"82":{"start":{"line":136,"column":16},"end":{"line":136,"column":55}},"83":{"start":{"line":139,"column":36},"end":{"line":141,"column":18}},"84":{"start":{"line":140,"column":70},"end":{"line":140,"column":75}},"85":{"start":{"line":142,"column":23},"end":{"line":146,"column":9}},"86":{"start":{"line":148,"column":8},"end":{"line":148,"column":48}},"87":{"start":{"line":149,"column":8},"end":{"line":149,"column":61}},"88":{"start":{"line":152,"column":20},"end":{"line":152,"column":25}},"89":{"start":{"line":153,"column":8},"end":{"line":163,"column":9}},"90":{"start":{"line":154,"column":30},"end":{"line":154,"column":66}},"91":{"start":{"line":155,"column":26},"end":{"line":155,"column":58}},"92":{"start":{"line":156,"column":12},"end":{"line":162,"column":13}},"93":{"start":{"line":157,"column":34},"end":{"line":157,"column":64}},"94":{"start":{"line":158,"column":28},"end":{"line":158,"column":97}},"95":{"start":{"line":159,"column":16},"end":{"line":159,"column":73}},"96":{"start":{"line":160,"column":16},"end":{"line":160,"column":92}},"97":{"start":{"line":161,"column":16},"end":{"line":161,"column":23}},"98":{"start":{"line":164,"column":8},"end":{"line":164,"column":74}},"99":{"start":{"line":165,"column":8},"end":{"line":165,"column":15}},"100":{"start":{"line":168,"column":0},"end":{"line":168,"column":68}},"101":{"start":{"line":175,"column":31},"end":{"line":202,"column":1}},"102":{"start":{"line":176,"column":25},"end":{"line":176,"column":46}},"103":{"start":{"line":177,"column":4},"end":{"line":178,"column":38}},"104":{"start":{"line":178,"column":8},"end":{"line":178,"column":38}},"105":{"start":{"line":179,"column":18},"end":{"line":179,"column":65}},"106":{"start":{"line":180,"column":19},"end":{"line":180,"column":90}},"107":{"start":{"line":181,"column":18},"end":{"line":181,"column":87}},"108":{"start":{"line":182,"column":17},"end":{"line":182,"column":81}},"109":{"start":{"line":183,"column":18},"end":{"line":183,"column":73}},"110":{"start":{"line":184,"column":20},"end":{"line":184,"column":63}},"111":{"start":{"line":185,"column":20},"end":{"line":185,"column":37}},"112":{"start":{"line":186,"column":18},"end":{"line":186,"column":20}},"113":{"start":{"line":187,"column":4},"end":{"line":188,"column":37}},"114":{"start":{"line":188,"column":8},"end":{"line":188,"column":37}},"115":{"start":{"line":189,"column":4},"end":{"line":190,"column":39}},"116":{"start":{"line":190,"column":8},"end":{"line":190,"column":39}},"117":{"start":{"line":191,"column":4},"end":{"line":192,"column":37}},"118":{"start":{"line":192,"column":8},"end":{"line":192,"column":37}},"119":{"start":{"line":193,"column":4},"end":{"line":194,"column":35}},"120":{"start":{"line":194,"column":8},"end":{"line":194,"column":35}},"121":{"start":{"line":195,"column":4},"end":{"line":196,"column":35}},"122":{"start":{"line":196,"column":8},"end":{"line":196,"column":35}},"123":{"start":{"line":197,"column":4},"end":{"line":198,"column":38}},"124":{"start":{"line":198,"column":8},"end":{"line":198,"column":38}},"125":{"start":{"line":199,"column":4},"end":{"line":200,"column":38}},"126":{"start":{"line":200,"column":8},"end":{"line":200,"column":38}},"127":{"start":{"line":201,"column":4},"end":{"line":201,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":29,"column":29},"end":{"line":29,"column":30}},"loc":{"start":{"line":29,"column":43},"end":{"line":84,"column":2}},"line":29},"9":{"name":"(anonymous_9)","decl":{"start":{"line":29,"column":77},"end":{"line":29,"column":78}},"loc":{"start":{"line":29,"column":90},"end":{"line":84,"column":1}},"line":29},"10":{"name":"(anonymous_10)","decl":{"start":{"line":94,"column":37},"end":{"line":94,"column":38}},"loc":{"start":{"line":94,"column":51},"end":{"line":167,"column":2}},"line":94},"11":{"name":"(anonymous_11)","decl":{"start":{"line":94,"column":85},"end":{"line":94,"column":86}},"loc":{"start":{"line":94,"column":98},"end":{"line":167,"column":1}},"line":94},"12":{"name":"(anonymous_12)","decl":{"start":{"line":117,"column":20},"end":{"line":117,"column":21}},"loc":{"start":{"line":117,"column":28},"end":{"line":117,"column":71}},"line":117},"13":{"name":"(anonymous_13)","decl":{"start":{"line":118,"column":17},"end":{"line":118,"column":18}},"loc":{"start":{"line":118,"column":25},"end":{"line":129,"column":9}},"line":118},"14":{"name":"(anonymous_14)","decl":{"start":{"line":130,"column":18},"end":{"line":130,"column":19}},"loc":{"start":{"line":130,"column":28},"end":{"line":130,"column":93}},"line":130},"15":{"name":"(anonymous_15)","decl":{"start":{"line":140,"column":60},"end":{"line":140,"column":61}},"loc":{"start":{"line":140,"column":70},"end":{"line":140,"column":75}},"line":140},"16":{"name":"(anonymous_16)","decl":{"start":{"line":175,"column":31},"end":{"line":175,"column":32}},"loc":{"start":{"line":175,"column":39},"end":{"line":202,"column":1}},"line":175}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":31,"column":18},"end":{"line":31,"column":60}},"type":"default-arg","locations":[{"start":{"line":31,"column":25},"end":{"line":31,"column":60}}],"line":31},"9":{"loc":{"start":{"line":31,"column":62},"end":{"line":31,"column":106}},"type":"default-arg","locations":[{"start":{"line":31,"column":70},"end":{"line":31,"column":106}}],"line":31},"10":{"loc":{"start":{"line":33,"column":4},"end":{"line":38,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":38,"column":5}},{"start":{},"end":{}}],"line":33},"11":{"loc":{"start":{"line":33,"column":10},"end":{"line":33,"column":64}},"type":"cond-expr","locations":[{"start":{"line":33,"column":45},"end":{"line":33,"column":51}},{"start":{"line":33,"column":54},"end":{"line":33,"column":64}}],"line":33},"12":{"loc":{"start":{"line":33,"column":10},"end":{"line":33,"column":42}},"type":"binary-expr","locations":[{"start":{"line":33,"column":10},"end":{"line":33,"column":23}},{"start":{"line":33,"column":27},"end":{"line":33,"column":42}}],"line":33},"13":{"loc":{"start":{"line":39,"column":32},"end":{"line":39,"column":85}},"type":"binary-expr","locations":[{"start":{"line":39,"column":32},"end":{"line":39,"column":46}},{"start":{"line":39,"column":50},"end":{"line":39,"column":85}}],"line":39},"14":{"loc":{"start":{"line":40,"column":33},"end":{"line":40,"column":88}},"type":"binary-expr","locations":[{"start":{"line":40,"column":33},"end":{"line":40,"column":48}},{"start":{"line":40,"column":52},"end":{"line":40,"column":88}}],"line":40},"15":{"loc":{"start":{"line":50,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":56,"column":9}},{"start":{},"end":{}}],"line":50},"16":{"loc":{"start":{"line":57,"column":23},"end":{"line":59,"column":96}},"type":"cond-expr","locations":[{"start":{"line":58,"column":14},"end":{"line":58,"column":91}},{"start":{"line":59,"column":14},"end":{"line":59,"column":96}}],"line":57},"17":{"loc":{"start":{"line":67,"column":8},"end":{"line":77,"column":9}},"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":77,"column":9}},{"start":{},"end":{}}],"line":67},"18":{"loc":{"start":{"line":67,"column":12},"end":{"line":67,"column":45}},"type":"binary-expr","locations":[{"start":{"line":67,"column":12},"end":{"line":67,"column":30}},{"start":{"line":67,"column":34},"end":{"line":67,"column":45}}],"line":67},"19":{"loc":{"start":{"line":70,"column":12},"end":{"line":76,"column":13}},"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":76,"column":13}},{"start":{},"end":{}}],"line":70},"20":{"loc":{"start":{"line":81,"column":27},"end":{"line":81,"column":84}},"type":"binary-expr","locations":[{"start":{"line":81,"column":27},"end":{"line":81,"column":38}},{"start":{"line":81,"column":42},"end":{"line":81,"column":84}}],"line":81},"21":{"loc":{"start":{"line":97,"column":4},"end":{"line":102,"column":5}},"type":"if","locations":[{"start":{"line":97,"column":4},"end":{"line":102,"column":5}},{"start":{},"end":{}}],"line":97},"22":{"loc":{"start":{"line":97,"column":8},"end":{"line":97,"column":28}},"type":"binary-expr","locations":[{"start":{"line":97,"column":8},"end":{"line":97,"column":13}},{"start":{"line":97,"column":17},"end":{"line":97,"column":28}}],"line":97},"23":{"loc":{"start":{"line":108,"column":8},"end":{"line":112,"column":9}},"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":112,"column":9}},{"start":{},"end":{}}],"line":108},"24":{"loc":{"start":{"line":134,"column":12},"end":{"line":137,"column":13}},"type":"if","locations":[{"start":{"line":134,"column":12},"end":{"line":137,"column":13}},{"start":{},"end":{}}],"line":134},"25":{"loc":{"start":{"line":134,"column":16},"end":{"line":134,"column":74}},"type":"binary-expr","locations":[{"start":{"line":134,"column":16},"end":{"line":134,"column":59}},{"start":{"line":134,"column":63},"end":{"line":134,"column":74}}],"line":134},"26":{"loc":{"start":{"line":139,"column":36},"end":{"line":141,"column":18}},"type":"cond-expr","locations":[{"start":{"line":140,"column":14},"end":{"line":140,"column":105}},{"start":{"line":141,"column":14},"end":{"line":141,"column":18}}],"line":139},"27":{"loc":{"start":{"line":153,"column":8},"end":{"line":163,"column":9}},"type":"if","locations":[{"start":{"line":153,"column":8},"end":{"line":163,"column":9}},{"start":{},"end":{}}],"line":153},"28":{"loc":{"start":{"line":153,"column":12},"end":{"line":153,"column":45}},"type":"binary-expr","locations":[{"start":{"line":153,"column":12},"end":{"line":153,"column":30}},{"start":{"line":153,"column":34},"end":{"line":153,"column":45}}],"line":153},"29":{"loc":{"start":{"line":156,"column":12},"end":{"line":162,"column":13}},"type":"if","locations":[{"start":{"line":156,"column":12},"end":{"line":162,"column":13}},{"start":{},"end":{}}],"line":156},"30":{"loc":{"start":{"line":177,"column":4},"end":{"line":178,"column":38}},"type":"if","locations":[{"start":{"line":177,"column":4},"end":{"line":178,"column":38}},{"start":{},"end":{}}],"line":177},"31":{"loc":{"start":{"line":187,"column":4},"end":{"line":188,"column":37}},"type":"if","locations":[{"start":{"line":187,"column":4},"end":{"line":188,"column":37}},{"start":{},"end":{}}],"line":187},"32":{"loc":{"start":{"line":189,"column":4},"end":{"line":190,"column":39}},"type":"if","locations":[{"start":{"line":189,"column":4},"end":{"line":190,"column":39}},{"start":{},"end":{}}],"line":189},"33":{"loc":{"start":{"line":191,"column":4},"end":{"line":192,"column":37}},"type":"if","locations":[{"start":{"line":191,"column":4},"end":{"line":192,"column":37}},{"start":{},"end":{}}],"line":191},"34":{"loc":{"start":{"line":193,"column":4},"end":{"line":194,"column":35}},"type":"if","locations":[{"start":{"line":193,"column":4},"end":{"line":194,"column":35}},{"start":{},"end":{}}],"line":193},"35":{"loc":{"start":{"line":195,"column":4},"end":{"line":196,"column":35}},"type":"if","locations":[{"start":{"line":195,"column":4},"end":{"line":196,"column":35}},{"start":{},"end":{}}],"line":195},"36":{"loc":{"start":{"line":197,"column":4},"end":{"line":198,"column":38}},"type":"if","locations":[{"start":{"line":197,"column":4},"end":{"line":198,"column":38}},{"start":{},"end":{}}],"line":197},"37":{"loc":{"start":{"line":199,"column":4},"end":{"line":200,"column":38}},"type":"if","locations":[{"start":{"line":199,"column":4},"end":{"line":200,"column":38}},{"start":{},"end":{}}],"line":199}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":1,"101":1,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0],"9":[0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/controllers/prController.ts","sources":["D:/projects/github-pr-analytics/src/controllers/prController.ts"],"names":[],"mappings":"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","sourcesContent":["// external dependencies\r\nimport type { Response } from \"express\";\r\nimport { cache, generateCacheKey } from \"../utils/cache\";\r\n\r\n// internal dependencies\r\nimport {\r\n  fetchOpenPullRequests,\r\n  fetchOpenPullRequestsForAllRepos,\r\n  fetchAllPullRequestsForUser,\r\n} from \"../services/githubService\";\r\nimport { APIError, AuthenticatedRequest } from \"../common/types\";\r\nimport {\r\n  STATUS_CODES,\r\n  MESSAGES,\r\n  GITHUB_STATES,\r\n  DEFAULT_PAGINATION,\r\n} from \"../common/constants\";\r\nimport logger from \"../utils/logger\";\r\n\r\n/**\r\n * GET /prs/:developer/open - Get open PRs for a developer\r\n * Controller to get open pull requests for a developer\r\n *\r\n * @param req - AuthenticatedRequest request object\r\n * @param res - express response object\r\n * @returns promise that resolves to void\r\n */\r\nexport const getOpenPRsController = async (\r\n  req: AuthenticatedRequest,\r\n  res: Response\r\n): Promise<void> => {\r\n  const { developer } = req.params;\r\n  const {\r\n    repo,\r\n    page = DEFAULT_PAGINATION.PAGE,\r\n    limit = DEFAULT_PAGINATION.LIMIT,\r\n  } = req.query;\r\n  const user = req.user;\r\n\r\n  if (!user?.token) {\r\n    res\r\n      .status(STATUS_CODES.UNAUTHORIZED)\r\n      .json({ error: MESSAGES.UNAUTHORIZED_USER });\r\n    return;\r\n  }\r\n\r\n  const pageNum = Math.max(\r\n    1,\r\n    parseInt(page as string) || DEFAULT_PAGINATION.PAGE\r\n  );\r\n  const limitNum = Math.max(\r\n    1,\r\n    parseInt(limit as string) || DEFAULT_PAGINATION.LIMIT\r\n  );\r\n\r\n  try {\r\n    // Generate cache key\r\n    const cacheKey = generateCacheKey(\"openPRs\", {\r\n      developer,\r\n      repo: repo as string,\r\n      page: pageNum,\r\n      limit: limitNum,\r\n    });\r\n    const cached = cache.get(cacheKey);\r\n    if (cached) {\r\n      res\r\n        .status(STATUS_CODES.OK)\r\n        .json({ prs: cached, total: (cached as unknown[]).length });\r\n        logger.info(\"cached result\");\r\n        return;\r\n    }\r\n\r\n    const allPRs = repo\r\n      ? await fetchOpenPullRequests(developer, repo as string, user.token)\r\n      : await fetchOpenPullRequestsForAllRepos(developer, user.token);\r\n\r\n    const paginated = allPRs.slice(\r\n      (pageNum - 1) * limitNum,\r\n      pageNum * limitNum\r\n    );\r\n\r\n    // Cache the paginated result\r\n    cache.set(cacheKey, paginated, 60);\r\n\r\n    res.status(STATUS_CODES.OK).json({ prs: paginated, total: allPRs.length });\r\n  } catch (error) {\r\n    const err = error as APIError;\r\n    if (err.status === 403 && err.headers) {\r\n      const remaining = err.headers[\"x-ratelimit-remaining\"];\r\n      const reset = err.headers[\"x-ratelimit-reset\"];\r\n      if (remaining === \"0\") {\r\n        const resetDate = new Date(Number(reset) * 1000);\r\n        const msg = `GitHub rate limit exceeded. Try again at ${resetDate.toISOString()}`;\r\n        logger.warn(`developer: ${developer}, ${msg}`);\r\n        res.status(STATUS_CODES.TOO_MANY_REQUESTS).json({ error: msg });\r\n        return;\r\n      }\r\n    }\r\n    logger.error(\"Controller error:\", err.message);\r\n    res\r\n      .status(STATUS_CODES.INTERNAL_SERVER_ERROR)\r\n      .json({ error: err.message || MESSAGES.INTERNAL_SERVER_ERROR });\r\n      return;\r\n  }\r\n};\r\n\r\n/**\r\n * GET /prs/metrics/:developer - Get PR timing metrics for a developer\r\n * Controller to get PR timing metrics for a developer\r\n *\r\n * @param req - AuthenticatedRequest request object\r\n * @param res - express response object\r\n * @returns promise that resolves to void\r\n */\r\nexport const getPRTimingMetricsController = async (\r\n  req: AuthenticatedRequest,\r\n  res: Response\r\n): Promise<void> => {\r\n  const { developer } = req.params;\r\n  const user = req.user;\r\n\r\n  if (!user || !user.token) {\r\n    res\r\n      .status(STATUS_CODES.UNAUTHORIZED)\r\n      .json({ error: MESSAGES.UNAUTHORIZED_USER });\r\n    return;\r\n  }\r\n\r\n  const token = user.token;\r\n\r\n  try {\r\n    // Generate cache key\r\n    const cacheKey = generateCacheKey(\"prMetrics\", { developer });\r\n    const cached = cache.get(cacheKey);\r\n    if (cached) {\r\n      res.status(STATUS_CODES.OK).json(cached);\r\n      logger.info(\"cached result\");\r\n      return;\r\n    }\r\n\r\n    const allPRs = await fetchAllPullRequestsForUser(developer, token);\r\n    const now = new Date().getTime();\r\n    const closedDurations: number[] = [];\r\n\r\n    const longestRunningOpenPRs = allPRs\r\n      .filter((pr) => pr.state === GITHUB_STATES.OPEN)\r\n      .map((pr) => {\r\n        const openDuration = now - new Date(pr.createdAt).getTime();\r\n        return {\r\n          title: pr.title,\r\n          author: pr.author,\r\n          createdAt: pr.createdAt,\r\n          status: pr.state,\r\n          repo: pr.pr.split(\"/pull\")[0],\r\n          pr: pr.pr,\r\n          openSince: formatExtendedDuration(openDuration),\r\n        };\r\n      })\r\n      .sort(\r\n        (a, b) =>\r\n          new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\r\n      )\r\n      .slice(0, 5);\r\n\r\n    for (const pr of allPRs) {\r\n      const created = new Date(pr.createdAt).getTime();\r\n      if (pr.state !== GITHUB_STATES.OPEN && pr.closedAt) {\r\n        const closed = new Date(pr.closedAt).getTime();\r\n        closedDurations.push(closed - created);\r\n      }\r\n    }\r\n\r\n    const avgCloseOrMergeTime = closedDurations.length\r\n      ? formatExtendedDuration(\r\n          closedDurations.reduce((a, b) => a + b, 0) / closedDurations.length\r\n        )\r\n      : null;\r\n\r\n    const result = {\r\n      developer,\r\n      avgCloseOrMergeTime: avgCloseOrMergeTime,\r\n      longestRunningOpenPRs: longestRunningOpenPRs,\r\n    };\r\n\r\n    // Cache metrics\r\n    cache.set(cacheKey, result, 60);\r\n\r\n    res.status(STATUS_CODES.OK).json(result);\r\n  } catch (error) {\r\n    const err = error as APIError;\r\n    if (err.status === 403 && err.headers) {\r\n      const remaining = err.headers[\"x-ratelimit-remaining\"];\r\n      const reset = err.headers[\"x-ratelimit-reset\"];\r\n      if (remaining === \"0\") {\r\n        const resetDate = new Date(Number(reset) * 1000);\r\n        const msg = `GitHub rate limit exceeded. Try again at ${resetDate.toISOString()}`;\r\n        logger.warn(`developer: ${developer}, ${msg}`);\r\n        res.status(STATUS_CODES.TOO_MANY_REQUESTS).json({ error: msg });\r\n        return;\r\n      }\r\n    }\r\n    logger.error(`err: ${err}, Failed to fetch PR metrics`);\r\n    return;\r\n  }\r\n};\r\n\r\n/**\r\n * Helper Function to format a duration of milliseconds into a human-readable string\r\n *\r\n * @param ms - duration in milliseconds\r\n * @returns human-readable string representation of the duration\r\n */\r\nconst formatExtendedDuration = (ms: number): string => {\r\n  const totalSeconds = Math.floor(ms / 1000);\r\n  if (totalSeconds < 60) return `${totalSeconds} secs`;\r\n\r\n  const years = Math.floor(totalSeconds / (60 * 60 * 24 * 365));\r\n  const months = Math.floor(\r\n    (totalSeconds % (60 * 60 * 24 * 365)) / (60 * 60 * 24 * 30)\r\n  );\r\n  const weeks = Math.floor(\r\n    (totalSeconds % (60 * 60 * 24 * 30)) / (60 * 60 * 24 * 7)\r\n  );\r\n  const days = Math.floor((totalSeconds % (60 * 60 * 24 * 7)) / (60 * 60 * 24));\r\n  const hours = Math.floor((totalSeconds % (60 * 60 * 24)) / (60 * 60));\r\n  const minutes = Math.floor((totalSeconds % (60 * 60)) / 60);\r\n  const seconds = totalSeconds % 60;\r\n\r\n  const parts = [];\r\n  if (years) parts.push(`${years} years`);\r\n  if (months) parts.push(`${months} months`);\r\n  if (weeks) parts.push(`${weeks} weeks`);\r\n  if (days) parts.push(`${days} days`);\r\n  if (hours) parts.push(`${hours} hrs`);\r\n  if (minutes) parts.push(`${minutes} mins`);\r\n  if (seconds) parts.push(`${seconds} secs`);\r\n\r\n  return parts.join(\", \");\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"26eb51cbc248f3bc401a40ba49b40d8d1c0d5794","contentHash":"ee8617557f4d0b00caa80c471e07bb506d6fe4d31a79ed166a4f7b4dbdd57fee"},"D:\\projects\\github-pr-analytics\\src\\utils\\cache.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\utils\\cache.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":23}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":44}},"5":{"start":{"line":9,"column":21},"end":{"line":9,"column":59}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":75}},"7":{"start":{"line":23,"column":25},"end":{"line":23,"column":27}},"8":{"start":{"line":24,"column":4},"end":{"line":29,"column":7}},"9":{"start":{"line":27,"column":22},"end":{"line":27,"column":33}},"10":{"start":{"line":28,"column":8},"end":{"line":28,"column":75}},"11":{"start":{"line":31,"column":23},"end":{"line":31,"column":51}},"12":{"start":{"line":33,"column":4},"end":{"line":33,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"generateCacheKey","decl":{"start":{"line":21,"column":9},"end":{"line":21,"column":25}},"loc":{"start":{"line":21,"column":42},"end":{"line":34,"column":1}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":17},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":29,"column":5}},"line":26}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":28,"column":28},"end":{"line":28,"column":74}},"type":"cond-expr","locations":[{"start":{"line":28,"column":51},"end":{"line":28,"column":66}},{"start":{"line":28,"column":69},"end":{"line":28,"column":74}}],"line":28}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"f":{"0":1,"1":0,"2":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/utils/cache.ts","sources":["D:/projects/github-pr-analytics/src/utils/cache.ts"],"names":[],"mappings":";;;;;;AAeA,4CAkBC;AAjCD,wBAAwB;AACxB,4DAAmC;AAEnC,mDAAmD;AACtC,QAAA,KAAK,GAAG,IAAI,oBAAS,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,WAAW,EAAE,GAAG,EAAE,CAAC,CAAC;AAErE;;;;;;;;GAQG;AACH,SAAgB,gBAAgB,CAC9B,MAAc,EACd,MAA4D;IAE5D,0CAA0C;IAC1C,MAAM,YAAY,GAA8C,EAAE,CAAC;IACnE,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;SAChB,IAAI,EAAE;SACN,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;QACf,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;QAC1B,YAAY,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;IACrE,CAAC,CAAC,CAAC;IAEL,kCAAkC;IAClC,MAAM,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;IAEhD,uCAAuC;IACvC,OAAO,GAAG,MAAM,IAAI,UAAU,EAAE,CAAC;AACnC,CAAC","sourcesContent":["// external dependencies\r\nimport NodeCache from 'node-cache';\r\n\r\n// In-memory cache with a default TTL of 60 seconds\r\nexport const cache = new NodeCache({ stdTTL: 60, checkperiod: 120 });\r\n\r\n/**\r\n *\r\n * Method to create a cache key string by combining a prefix with sorted parameters\r\n * Ensures that identical parameter objects always produce the same cache key\r\n *\r\n * @param prefix - namespace prefix for the key (e.g., 'openPRs')\r\n * @param params - object containing parameters to include in the key\r\n * @returns deterministic string key for cache storage and retrieval\r\n */\r\nexport function generateCacheKey(\r\n  prefix: string,\r\n  params: Record<string, string | number | boolean | string[]>\r\n): string {\r\n  // Sort keys to ensure consistent ordering\r\n  const sortedParams: Record<string, string | number | boolean> = {};\r\n  Object.keys(params)\r\n    .sort()\r\n    .forEach((key) => {\r\n      const value = params[key];\r\n      sortedParams[key] = Array.isArray(value) ? value.join(',') : value;\r\n    });\r\n\r\n  // Serialize sorted params to JSON\r\n  const serialized = JSON.stringify(sortedParams);\r\n\r\n  // Combine prefix and serialized params\r\n  return `${prefix}:${serialized}`;\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dd9adbfbdbcbddc3ab16ff09654dd08384065b50","contentHash":"ea172ddee49352dce536ebd6544d1fe05bf695cc876dd913e6f213bbefa7e535"},"D:\\projects\\github-pr-analytics\\src\\services\\githubService.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\services\\githubService.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":120}},"16":{"start":{"line":17,"column":17},"end":{"line":17,"column":60}},"17":{"start":{"line":18,"column":20},"end":{"line":18,"column":50}},"18":{"start":{"line":19,"column":23},"end":{"line":19,"column":55}},"19":{"start":{"line":29,"column":4},"end":{"line":38,"column":6}},"20":{"start":{"line":48,"column":30},"end":{"line":63,"column":2}},"21":{"start":{"line":48,"column":54},"end":{"line":63,"column":2}},"22":{"start":{"line":49,"column":4},"end":{"line":62,"column":5}},"23":{"start":{"line":50,"column":23},"end":{"line":50,"column":62}},"24":{"start":{"line":51,"column":25},"end":{"line":55,"column":10}},"25":{"start":{"line":56,"column":8},"end":{"line":56,"column":49}},"26":{"start":{"line":56,"column":32},"end":{"line":56,"column":47}},"27":{"start":{"line":59,"column":20},"end":{"line":59,"column":25}},"28":{"start":{"line":60,"column":8},"end":{"line":60,"column":73}},"29":{"start":{"line":61,"column":8},"end":{"line":61,"column":109}},"30":{"start":{"line":64,"column":0},"end":{"line":64,"column":54}},"31":{"start":{"line":72,"column":41},"end":{"line":92,"column":2}},"32":{"start":{"line":72,"column":59},"end":{"line":92,"column":2}},"33":{"start":{"line":73,"column":4},"end":{"line":91,"column":5}},"34":{"start":{"line":74,"column":23},"end":{"line":74,"column":62}},"35":{"start":{"line":75,"column":32},"end":{"line":75,"column":73}},"36":{"start":{"line":76,"column":30},"end":{"line":81,"column":12}},"37":{"start":{"line":76,"column":75},"end":{"line":81,"column":10}},"38":{"start":{"line":77,"column":34},"end":{"line":79,"column":14}},"39":{"start":{"line":80,"column":12},"end":{"line":80,"column":57}},"40":{"start":{"line":80,"column":35},"end":{"line":80,"column":55}},"41":{"start":{"line":83,"column":8},"end":{"line":85,"column":47}},"42":{"start":{"line":84,"column":32},"end":{"line":84,"column":61}},"43":{"start":{"line":85,"column":33},"end":{"line":85,"column":45}},"44":{"start":{"line":88,"column":20},"end":{"line":88,"column":25}},"45":{"start":{"line":89,"column":8},"end":{"line":89,"column":79}},"46":{"start":{"line":90,"column":8},"end":{"line":90,"column":71}},"47":{"start":{"line":93,"column":0},"end":{"line":93,"column":76}},"48":{"start":{"line":101,"column":36},"end":{"line":113,"column":2}},"49":{"start":{"line":101,"column":57},"end":{"line":113,"column":2}},"50":{"start":{"line":102,"column":19},"end":{"line":102,"column":58}},"51":{"start":{"line":103,"column":28},"end":{"line":103,"column":72}},"52":{"start":{"line":104,"column":26},"end":{"line":109,"column":8}},"53":{"start":{"line":104,"column":71},"end":{"line":109,"column":6}},"54":{"start":{"line":105,"column":30},"end":{"line":107,"column":10}},"55":{"start":{"line":108,"column":8},"end":{"line":108,"column":53}},"56":{"start":{"line":108,"column":31},"end":{"line":108,"column":51}},"57":{"start":{"line":110,"column":4},"end":{"line":112,"column":43}},"58":{"start":{"line":111,"column":28},"end":{"line":111,"column":57}},"59":{"start":{"line":112,"column":29},"end":{"line":112,"column":41}},"60":{"start":{"line":114,"column":0},"end":{"line":114,"column":66}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"mapPR","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":14}},"loc":{"start":{"line":27,"column":29},"end":{"line":39,"column":1}},"line":27},"9":{"name":"(anonymous_9)","decl":{"start":{"line":48,"column":30},"end":{"line":48,"column":31}},"loc":{"start":{"line":48,"column":54},"end":{"line":63,"column":2}},"line":48},"10":{"name":"(anonymous_10)","decl":{"start":{"line":48,"column":88},"end":{"line":48,"column":89}},"loc":{"start":{"line":48,"column":101},"end":{"line":63,"column":1}},"line":48},"11":{"name":"(anonymous_11)","decl":{"start":{"line":56,"column":24},"end":{"line":56,"column":25}},"loc":{"start":{"line":56,"column":32},"end":{"line":56,"column":47}},"line":56},"12":{"name":"(anonymous_12)","decl":{"start":{"line":72,"column":41},"end":{"line":72,"column":42}},"loc":{"start":{"line":72,"column":59},"end":{"line":92,"column":2}},"line":72},"13":{"name":"(anonymous_13)","decl":{"start":{"line":72,"column":93},"end":{"line":72,"column":94}},"loc":{"start":{"line":72,"column":106},"end":{"line":92,"column":1}},"line":72},"14":{"name":"(anonymous_14)","decl":{"start":{"line":76,"column":65},"end":{"line":76,"column":66}},"loc":{"start":{"line":76,"column":75},"end":{"line":81,"column":10}},"line":76},"15":{"name":"(anonymous_15)","decl":{"start":{"line":76,"column":109},"end":{"line":76,"column":110}},"loc":{"start":{"line":76,"column":122},"end":{"line":81,"column":9}},"line":76},"16":{"name":"(anonymous_16)","decl":{"start":{"line":80,"column":27},"end":{"line":80,"column":28}},"loc":{"start":{"line":80,"column":35},"end":{"line":80,"column":55}},"line":80},"17":{"name":"(anonymous_17)","decl":{"start":{"line":84,"column":20},"end":{"line":84,"column":21}},"loc":{"start":{"line":84,"column":32},"end":{"line":84,"column":61}},"line":84},"18":{"name":"(anonymous_18)","decl":{"start":{"line":85,"column":21},"end":{"line":85,"column":22}},"loc":{"start":{"line":85,"column":33},"end":{"line":85,"column":45}},"line":85},"19":{"name":"(anonymous_19)","decl":{"start":{"line":101,"column":36},"end":{"line":101,"column":37}},"loc":{"start":{"line":101,"column":57},"end":{"line":113,"column":2}},"line":101},"20":{"name":"(anonymous_20)","decl":{"start":{"line":101,"column":91},"end":{"line":101,"column":92}},"loc":{"start":{"line":101,"column":104},"end":{"line":113,"column":1}},"line":101},"21":{"name":"(anonymous_21)","decl":{"start":{"line":104,"column":61},"end":{"line":104,"column":62}},"loc":{"start":{"line":104,"column":71},"end":{"line":109,"column":6}},"line":104},"22":{"name":"(anonymous_22)","decl":{"start":{"line":104,"column":105},"end":{"line":104,"column":106}},"loc":{"start":{"line":104,"column":118},"end":{"line":109,"column":5}},"line":104},"23":{"name":"(anonymous_23)","decl":{"start":{"line":108,"column":23},"end":{"line":108,"column":24}},"loc":{"start":{"line":108,"column":31},"end":{"line":108,"column":51}},"line":108},"24":{"name":"(anonymous_24)","decl":{"start":{"line":111,"column":16},"end":{"line":111,"column":17}},"loc":{"start":{"line":111,"column":28},"end":{"line":111,"column":57}},"line":111},"25":{"name":"(anonymous_25)","decl":{"start":{"line":112,"column":17},"end":{"line":112,"column":18}},"loc":{"start":{"line":112,"column":29},"end":{"line":112,"column":41}},"line":112}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":76}},"type":"cond-expr","locations":[{"start":{"line":31,"column":59},"end":{"line":31,"column":65}},{"start":{"line":31,"column":68},"end":{"line":31,"column":76}}],"line":31},"9":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":56}},"type":"binary-expr","locations":[{"start":{"line":31,"column":16},"end":{"line":31,"column":39}},{"start":{"line":31,"column":43},"end":{"line":31,"column":56}}],"line":31},"10":{"loc":{"start":{"line":61,"column":24},"end":{"line":61,"column":107}},"type":"binary-expr","locations":[{"start":{"line":61,"column":25},"end":{"line":61,"column":78}},{"start":{"line":61,"column":83},"end":{"line":61,"column":107}}],"line":61},"11":{"loc":{"start":{"line":61,"column":25},"end":{"line":61,"column":78}},"type":"cond-expr","locations":[{"start":{"line":61,"column":58},"end":{"line":61,"column":64}},{"start":{"line":61,"column":67},"end":{"line":61,"column":78}}],"line":61},"12":{"loc":{"start":{"line":61,"column":25},"end":{"line":61,"column":55}},"type":"binary-expr","locations":[{"start":{"line":61,"column":25},"end":{"line":61,"column":37}},{"start":{"line":61,"column":41},"end":{"line":61,"column":55}}],"line":61},"13":{"loc":{"start":{"line":90,"column":24},"end":{"line":90,"column":69}},"type":"binary-expr","locations":[{"start":{"line":90,"column":24},"end":{"line":90,"column":35}},{"start":{"line":90,"column":39},"end":{"line":90,"column":69}}],"line":90}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/services/githubService.ts","sources":["D:/projects/github-pr-analytics/src/services/githubService.ts"],"names":[],"mappings":"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","sourcesContent":["// internal dependencies\r\nimport logger from \"../utils/logger\";\r\nimport { GITHUB_STATES } from \"../common/constants\";\r\nimport { githubClient } from \"../utils/githubClient\";\r\nimport { APIError, GitHubPR, GitHubRepo, MappedPR } from \"../common/types\";\r\n\r\n/**\r\n * Helper function to map a GitHub PR object to a simplified format\r\n * \r\n * @param pr - pull request object from the GitHub API\r\n * @param repoName - name of the repository the pull request belongs to\r\n * @returns mapped pull request object\r\n */\r\nfunction mapPR(pr: GitHubPR, repoName: string): MappedPR {\r\n  return {\r\n    title: pr.title,\r\n    author: pr.user?.login,\r\n    createdAt: pr.created_at,\r\n    closedAt: pr.closed_at,\r\n    status: pr.state,\r\n    state: pr.state,\r\n    repo: repoName,\r\n    pr: pr.html_url,\r\n  };\r\n}\r\n\r\n/**\r\n * Fetches open pull requests for a specific repository from the GitHub API\r\n * \r\n * @param owner - owner of the repository\r\n * @param repo - name of the repository\r\n * @param token - gitHub Personal Access Token (PAT) for authentication\r\n * @returns list of open pull requests for the specified repository\r\n */\r\nexport const fetchOpenPullRequests = async (\r\n  owner: string,\r\n  repo: string,\r\n  token: string\r\n): Promise<MappedPR[]> => {\r\n  try {\r\n    const client = githubClient(token);\r\n    const { data } = await client.get<GitHubPR[]>(`/repos/${owner}/${repo}/pulls`, {\r\n      params: {\r\n        state: GITHUB_STATES.OPEN,\r\n      },\r\n    });\r\n\r\n    return data.map((pr) => mapPR(pr, repo));\r\n  } catch (error) {\r\n    const err = error as APIError;\r\n    logger.error(`GitHub API error (repo-specific):`, err);\r\n    throw new Error(err?.message || \"GitHub API call failed\");\r\n  }\r\n};\r\n\r\n/**\r\n * Fetches open pull requests for all repositories owned by a specific user from the GitHub API\r\n *\r\n * @param owner - owner of the repositories\r\n * @param token - gitHub Personal Access Token (PAT) for authentication\r\n * @returns list of open pull requests for all repositories owned by the user\r\n */\r\nexport const fetchOpenPullRequestsForAllRepos = async (\r\n  owner: string,\r\n  token: string\r\n): Promise<MappedPR[]> => {\r\n  try {\r\n    const client = githubClient(token);\r\n    const { data: repos } = await client.get<GitHubRepo[]>(`/users/${owner}/repos`);\r\n\r\n    const allPRsResults = await Promise.allSettled(\r\n      repos.map(async (repo) => {\r\n        const { data: prs } = await client.get<GitHubPR[]>(\r\n          `/repos/${owner}/${repo.name}/pulls`,\r\n          {\r\n            params: { state: GITHUB_STATES.OPEN },\r\n          }\r\n        );\r\n        return prs.map((pr) => mapPR(pr, repo.name));\r\n      })\r\n    );\r\n\r\n    // flatten and filter out failed results\r\n    return allPRsResults\r\n      .filter((result): result is PromiseFulfilledResult<MappedPR[]> => result.status === \"fulfilled\")\r\n      .flatMap((result) => result.value);\r\n  } catch (error) {\r\n    const err = error as APIError;\r\n    logger.error(`GitHub API error (owner-level):`, err.message);\r\n    throw new Error(err.message || \"Failed to fetch repos or PRs\");\r\n  }\r\n};\r\n\r\n/**\r\n * Fetches all pull requests for a specific user from the GitHub API\r\n *\r\n * @param userName - gitHub username of the user\r\n * @param token - gitHub Personal Access Token (PAT) for authentication\r\n * @returns list of all pull requests for the specified user\r\n */\r\nexport const fetchAllPullRequestsForUser = async (\r\n  userName: string,\r\n  token: string\r\n): Promise<MappedPR[]> => {\r\n  const client = githubClient(token);\r\n  const { data: repos } = await client.get<GitHubRepo[]>(`/users/${userName}/repos`);\r\n\r\n  const allPRsResults = await Promise.allSettled(\r\n    repos.map(async (repo) => {\r\n      const { data: prs } = await client.get<GitHubPR[]>(\r\n        `/repos/${repo.owner.login}/${repo.name}/pulls`,\r\n        {\r\n          params: { state: \"all\" },\r\n        }\r\n      );\r\n      return prs.map((pr) => mapPR(pr, repo.name));\r\n    })\r\n  );\r\n\r\n  return allPRsResults\r\n    .filter((result): result is PromiseFulfilledResult<MappedPR[]> => result.status === \"fulfilled\")\r\n    .flatMap((result) => result.value);\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fb976ce1ac656f86dcd13ada0ad2af561777681e","contentHash":"217a65d01aa8dae324969a9804b94851d54a16165987d3cca1584beaf1751040"},"D:\\projects\\github-pr-analytics\\src\\utils\\githubClient.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\utils\\githubClient.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"15":{"start":{"line":19,"column":18},"end":{"line":26,"column":5}},"16":{"start":{"line":20,"column":8},"end":{"line":24,"column":10}},"17":{"start":{"line":21,"column":21},"end":{"line":21,"column":23}},"18":{"start":{"line":22,"column":12},"end":{"line":22,"column":95}},"19":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"20":{"start":{"line":22,"column":77},"end":{"line":22,"column":95}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":22}},"22":{"start":{"line":25,"column":8},"end":{"line":25,"column":26}},"23":{"start":{"line":27,"column":4},"end":{"line":33,"column":6}},"24":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"25":{"start":{"line":28,"column":35},"end":{"line":28,"column":46}},"26":{"start":{"line":29,"column":21},"end":{"line":29,"column":23}},"27":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"28":{"start":{"line":30,"column":25},"end":{"line":30,"column":137}},"29":{"start":{"line":30,"column":38},"end":{"line":30,"column":50}},"30":{"start":{"line":30,"column":56},"end":{"line":30,"column":57}},"31":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"32":{"start":{"line":30,"column":102},"end":{"line":30,"column":137}},"33":{"start":{"line":31,"column":8},"end":{"line":31,"column":40}},"34":{"start":{"line":32,"column":8},"end":{"line":32,"column":22}},"35":{"start":{"line":35,"column":16},"end":{"line":43,"column":1}},"36":{"start":{"line":36,"column":28},"end":{"line":36,"column":110}},"37":{"start":{"line":36,"column":91},"end":{"line":36,"column":106}},"38":{"start":{"line":37,"column":4},"end":{"line":42,"column":7}},"39":{"start":{"line":38,"column":36},"end":{"line":38,"column":97}},"40":{"start":{"line":38,"column":42},"end":{"line":38,"column":70}},"41":{"start":{"line":38,"column":85},"end":{"line":38,"column":95}},"42":{"start":{"line":39,"column":35},"end":{"line":39,"column":100}},"43":{"start":{"line":39,"column":41},"end":{"line":39,"column":73}},"44":{"start":{"line":39,"column":88},"end":{"line":39,"column":98}},"45":{"start":{"line":40,"column":32},"end":{"line":40,"column":116}},"46":{"start":{"line":41,"column":8},"end":{"line":41,"column":78}},"47":{"start":{"line":44,"column":22},"end":{"line":46,"column":1}},"48":{"start":{"line":45,"column":4},"end":{"line":45,"column":62}},"49":{"start":{"line":47,"column":0},"end":{"line":47,"column":62}},"50":{"start":{"line":48,"column":0},"end":{"line":48,"column":60}},"51":{"start":{"line":50,"column":16},"end":{"line":50,"column":49}},"52":{"start":{"line":52,"column":20},"end":{"line":52,"column":50}},"53":{"start":{"line":59,"column":28},"end":{"line":62,"column":2}},"54":{"start":{"line":59,"column":37},"end":{"line":62,"column":2}},"55":{"start":{"line":60,"column":24},"end":{"line":60,"column":98}},"56":{"start":{"line":60,"column":59},"end":{"line":60,"column":97}},"57":{"start":{"line":61,"column":4},"end":{"line":61,"column":38}},"58":{"start":{"line":63,"column":0},"end":{"line":63,"column":50}},"59":{"start":{"line":71,"column":21},"end":{"line":79,"column":1}},"60":{"start":{"line":72,"column":4},"end":{"line":74,"column":5}},"61":{"start":{"line":73,"column":8},"end":{"line":73,"column":70}},"62":{"start":{"line":75,"column":4},"end":{"line":78,"column":7}},"63":{"start":{"line":80,"column":0},"end":{"line":80,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":51},"end":{"line":18,"column":52}},"loc":{"start":{"line":18,"column":63},"end":{"line":34,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":19,"column":18},"end":{"line":19,"column":19}},"loc":{"start":{"line":19,"column":30},"end":{"line":26,"column":5}},"line":19},"7":{"name":"(anonymous_7)","decl":{"start":{"line":20,"column":48},"end":{"line":20,"column":49}},"loc":{"start":{"line":20,"column":61},"end":{"line":24,"column":9}},"line":20},"8":{"name":"(anonymous_8)","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":12}},"loc":{"start":{"line":27,"column":26},"end":{"line":33,"column":5}},"line":27},"9":{"name":"(anonymous_9)","decl":{"start":{"line":35,"column":44},"end":{"line":35,"column":45}},"loc":{"start":{"line":35,"column":89},"end":{"line":43,"column":1}},"line":35},"10":{"name":"adopt","decl":{"start":{"line":36,"column":13},"end":{"line":36,"column":18}},"loc":{"start":{"line":36,"column":26},"end":{"line":36,"column":112}},"line":36},"11":{"name":"(anonymous_11)","decl":{"start":{"line":36,"column":70},"end":{"line":36,"column":71}},"loc":{"start":{"line":36,"column":89},"end":{"line":36,"column":108}},"line":36},"12":{"name":"(anonymous_12)","decl":{"start":{"line":37,"column":36},"end":{"line":37,"column":37}},"loc":{"start":{"line":37,"column":63},"end":{"line":42,"column":5}},"line":37},"13":{"name":"fulfilled","decl":{"start":{"line":38,"column":17},"end":{"line":38,"column":26}},"loc":{"start":{"line":38,"column":34},"end":{"line":38,"column":99}},"line":38},"14":{"name":"rejected","decl":{"start":{"line":39,"column":17},"end":{"line":39,"column":25}},"loc":{"start":{"line":39,"column":33},"end":{"line":39,"column":102}},"line":39},"15":{"name":"step","decl":{"start":{"line":40,"column":17},"end":{"line":40,"column":21}},"loc":{"start":{"line":40,"column":30},"end":{"line":40,"column":118}},"line":40},"16":{"name":"(anonymous_16)","decl":{"start":{"line":44,"column":56},"end":{"line":44,"column":57}},"loc":{"start":{"line":44,"column":71},"end":{"line":46,"column":1}},"line":44},"17":{"name":"(anonymous_17)","decl":{"start":{"line":59,"column":28},"end":{"line":59,"column":29}},"loc":{"start":{"line":59,"column":37},"end":{"line":62,"column":2}},"line":59},"18":{"name":"(anonymous_18)","decl":{"start":{"line":59,"column":71},"end":{"line":59,"column":72}},"loc":{"start":{"line":59,"column":84},"end":{"line":62,"column":1}},"line":59},"19":{"name":"(anonymous_19)","decl":{"start":{"line":60,"column":53},"end":{"line":60,"column":54}},"loc":{"start":{"line":60,"column":59},"end":{"line":60,"column":97}},"line":60},"20":{"name":"(anonymous_20)","decl":{"start":{"line":71,"column":21},"end":{"line":71,"column":22}},"loc":{"start":{"line":71,"column":32},"end":{"line":79,"column":1}},"line":71}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{},"end":{}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{},"end":{}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{},"end":{}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":34,"column":4}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":34,"column":4}}],"line":18},"11":{"loc":{"start":{"line":20,"column":18},"end":{"line":24,"column":9}},"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":44}},{"start":{"line":20,"column":48},"end":{"line":24,"column":9}}],"line":20},"12":{"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},"type":"if","locations":[{"start":{"line":22,"column":29},"end":{"line":22,"column":95}},{"start":{},"end":{}}],"line":22},"13":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":46}},{"start":{},"end":{}}],"line":28},"14":{"loc":{"start":{"line":28,"column":12},"end":{"line":28,"column":33}},"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":15}},{"start":{"line":28,"column":19},"end":{"line":28,"column":33}}],"line":28},"15":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"16":{"loc":{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},"type":"if","locations":[{"start":{"line":30,"column":78},"end":{"line":30,"column":137}},{"start":{},"end":{}}],"line":30},"17":{"loc":{"start":{"line":35,"column":16},"end":{"line":43,"column":1}},"type":"binary-expr","locations":[{"start":{"line":35,"column":17},"end":{"line":35,"column":21}},{"start":{"line":35,"column":25},"end":{"line":35,"column":39}},{"start":{"line":35,"column":44},"end":{"line":43,"column":1}}],"line":35},"18":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":109}},"type":"cond-expr","locations":[{"start":{"line":36,"column":56},"end":{"line":36,"column":61}},{"start":{"line":36,"column":64},"end":{"line":36,"column":109}}],"line":36},"19":{"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":34}},"type":"binary-expr","locations":[{"start":{"line":37,"column":16},"end":{"line":37,"column":17}},{"start":{"line":37,"column":22},"end":{"line":37,"column":33}}],"line":37},"20":{"loc":{"start":{"line":40,"column":32},"end":{"line":40,"column":115}},"type":"cond-expr","locations":[{"start":{"line":40,"column":46},"end":{"line":40,"column":67}},{"start":{"line":40,"column":70},"end":{"line":40,"column":115}}],"line":40},"21":{"loc":{"start":{"line":41,"column":51},"end":{"line":41,"column":67}},"type":"binary-expr","locations":[{"start":{"line":41,"column":51},"end":{"line":41,"column":61}},{"start":{"line":41,"column":65},"end":{"line":41,"column":67}}],"line":41},"22":{"loc":{"start":{"line":44,"column":22},"end":{"line":46,"column":1}},"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":27}},{"start":{"line":44,"column":31},"end":{"line":44,"column":51}},{"start":{"line":44,"column":56},"end":{"line":46,"column":1}}],"line":44},"23":{"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":61}},"type":"cond-expr","locations":[{"start":{"line":45,"column":37},"end":{"line":45,"column":40}},{"start":{"line":45,"column":43},"end":{"line":45,"column":61}}],"line":45},"24":{"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":33}},"type":"binary-expr","locations":[{"start":{"line":45,"column":12},"end":{"line":45,"column":15}},{"start":{"line":45,"column":19},"end":{"line":45,"column":33}}],"line":45},"25":{"loc":{"start":{"line":72,"column":4},"end":{"line":74,"column":5}},"type":"if","locations":[{"start":{"line":72,"column":4},"end":{"line":74,"column":5}},{"start":{},"end":{}}],"line":72}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":0,"55":0,"56":0,"57":0,"58":1,"59":1,"60":0,"61":0,"62":0,"63":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[1,1,1],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[1,1,1],"23":[0,1],"24":[1,1],"25":[0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/utils/githubClient.ts","sources":["D:/projects/github-pr-analytics/src/utils/githubClient.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wBAAwB;AACxB,kDAA6C;AAE7C,wBAAwB;AACxB,mDAA8E;AAE9E;;;;;GAKG;AACI,MAAM,mBAAmB,GAAG,CAAO,GAAW,EAAE,EAAE;IACvD,MAAM,EAAE,OAAO,EAAE,GAAG,wDAAa,eAAe,GAAC,CAAC;IAClD,OAAO,IAAI,OAAO,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;AACpC,CAAC,CAAA,CAAC;AAHW,QAAA,mBAAmB,uBAG9B;AAEF;;;;;;GAMG;AACI,MAAM,YAAY,GAAG,CAAC,KAAa,EAAiB,EAAE;IAC3D,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;IAChE,CAAC;IACD,OAAO,eAAK,CAAC,MAAM,CAAC;QAClB,OAAO,EAAE,+BAAmB;QAC5B,OAAO,kBACL,aAAa,EAAE,UAAU,KAAK,EAAE,IAC7B,8BAAkB,CACtB;KACF,CAAC,CAAC;AACL,CAAC,CAAC;AAXW,QAAA,YAAY,gBAWvB","sourcesContent":["// external dependencies\r\nimport axios, { AxiosInstance } from \"axios\";\r\n\r\n// internal dependencies\r\nimport { GITHUB_API_BASE_URL, GITHUB_API_HEADERS } from \"../common/constants\";\r\n\r\n/**\r\n * Dynamically imports and creates an authenticated GitHub Octokit client\r\n *\r\n * @param pat - GitHub Personal Access Token\r\n * @returns Promise resolving to Octokit instance\r\n */\r\nexport const createOctokitClient = async (pat: string) => {\r\n  const { Octokit } = await import(\"@octokit/rest\");\r\n  return new Octokit({ auth: pat });\r\n};\r\n\r\n/**\r\n * Creates an Axios instance configured for GitHub API requests\r\n * \r\n * @param token - GitHub Personal Access Token (PAT) for authentication\r\n * @returns axiosInstance with base URL and headers set for GitHub API\r\n * @throws error if token is missing\r\n */\r\nexport const githubClient = (token: string): AxiosInstance => {\r\n  if (!token) {\r\n    throw new Error(\"GitHub token is required for API requests.\");\r\n  }\r\n  return axios.create({\r\n    baseURL: GITHUB_API_BASE_URL,\r\n    headers: {\r\n      Authorization: `Bearer ${token}`, // set PAT for authentication\r\n      ...GITHUB_API_HEADERS,            // add default GitHub API headers\r\n    },\r\n  });\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"85ae875001410227cc4d72680e9729a9aad2e3a9","contentHash":"b5bd9560a181ba1491ec9b73a552615a9e6e0cb48a9664ae374ba5cbe3e51966"},"D:\\projects\\github-pr-analytics\\src\\common\\dtos\\pr.dto.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\common\\dtos\\pr.dto.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":28}},"2":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"4":{"start":{"line":4,"column":79},"end":{"line":4,"column":131}},"5":{"start":{"line":5,"column":9},"end":{"line":5,"column":150}},"6":{"start":{"line":5,"column":22},"end":{"line":5,"column":43}},"7":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"8":{"start":{"line":5,"column":81},"end":{"line":5,"column":150}},"9":{"start":{"line":6,"column":4},"end":{"line":6,"column":66}},"10":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"11":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"12":{"start":{"line":9,"column":79},"end":{"line":9,"column":109}},"13":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"14":{"start":{"line":12,"column":0},"end":{"line":12,"column":51}},"15":{"start":{"line":14,"column":26},"end":{"line":14,"column":52}},"16":{"start":{"line":15,"column":28},"end":{"line":15,"column":56}},"17":{"start":{"line":16,"column":23},"end":{"line":16,"column":33}},"18":{"start":{"line":19,"column":8},"end":{"line":19,"column":22}},"19":{"start":{"line":20,"column":8},"end":{"line":20,"column":24}},"20":{"start":{"line":23,"column":0},"end":{"line":23,"column":30}},"21":{"start":{"line":24,"column":0},"end":{"line":28,"column":45}},"22":{"start":{"line":29,"column":0},"end":{"line":34,"column":40}},"23":{"start":{"line":35,"column":0},"end":{"line":41,"column":40}},"24":{"start":{"line":37,"column":40},"end":{"line":37,"column":46}},"25":{"start":{"line":42,"column":0},"end":{"line":49,"column":41}},"26":{"start":{"line":44,"column":40},"end":{"line":44,"column":46}},"27":{"start":{"line":52,"column":0},"end":{"line":52,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":46},"end":{"line":2,"column":47}},"loc":{"start":{"line":2,"column":87},"end":{"line":7,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":46},"end":{"line":8,"column":47}},"loc":{"start":{"line":8,"column":62},"end":{"line":10,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":18},"end":{"line":21,"column":5}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":37,"column":34},"end":{"line":37,"column":35}},"loc":{"start":{"line":37,"column":40},"end":{"line":37,"column":46}},"line":37},"4":{"name":"(anonymous_4)","decl":{"start":{"line":44,"column":34},"end":{"line":44,"column":35}},"loc":{"start":{"line":44,"column":40},"end":{"line":44,"column":46}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":18},"end":{"line":2,"column":22}},{"start":{"line":2,"column":26},"end":{"line":2,"column":41}},{"start":{"line":2,"column":46},"end":{"line":7,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":42},"end":{"line":3,"column":48}},{"start":{"line":3,"column":51},"end":{"line":3,"column":125}}],"line":3},"2":{"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":67},"end":{"line":3,"column":118}},{"start":{"line":3,"column":121},"end":{"line":3,"column":125}}],"line":3},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},{"start":{"line":5,"column":9},"end":{"line":5,"column":150}}],"line":4},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":35}},{"start":{"line":4,"column":39},"end":{"line":4,"column":77}}],"line":4},"5":{"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},{"start":{},"end":{}}],"line":5},"6":{"loc":{"start":{"line":5,"column":85},"end":{"line":5,"column":149}},"type":"binary-expr","locations":[{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},{"start":{"line":5,"column":148},"end":{"line":5,"column":149}}],"line":5},"7":{"loc":{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":94},"end":{"line":5,"column":98}},{"start":{"line":5,"column":101},"end":{"line":5,"column":143}}],"line":5},"8":{"loc":{"start":{"line":5,"column":101},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":109},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":143}}],"line":5},"9":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":62}},"type":"binary-expr","locations":[{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":62}}],"line":6},"10":{"loc":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":8,"column":18},"end":{"line":8,"column":22}},{"start":{"line":8,"column":26},"end":{"line":8,"column":41}},{"start":{"line":8,"column":46},"end":{"line":10,"column":1}}],"line":8},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},{"start":{},"end":{}}],"line":9},"12":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":77}},"type":"binary-expr","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":35}},{"start":{"line":9,"column":39},"end":{"line":9,"column":77}}],"line":9}},"s":{"0":1,"1":4,"2":4,"3":4,"4":4,"5":0,"6":0,"7":0,"8":0,"9":4,"10":1,"11":4,"12":4,"13":1,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":1,"21":1,"22":1,"23":1,"24":0,"25":1,"26":0,"27":1},"f":{"0":4,"1":4,"2":0,"3":0,"4":0},"b":{"0":[1,1,1],"1":[0,4],"2":[0,4],"3":[4,0],"4":[4,4],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[4,4,0],"10":[1,1,1],"11":[4,0],"12":[4,4]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/common/dtos/pr.dto.ts","sources":["D:/projects/github-pr-analytics/src/common/dtos/pr.dto.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,wBAAwB;AACxB,qDAOyB;AACzB,yDAAyC;AAEzC,MAAM,cAAc,GAAG,UAAU,CAAC;AAElC,MAAa,SAAS;IAAtB;QAcE,SAAI,GAAW,CAAC,CAAC;QAOjB,UAAK,GAAW,EAAE,CAAC;IACrB,CAAC;CAAA;AAtBD,8BAsBC;AAnBC;IAFC,IAAA,0BAAQ,GAAE;IACV,IAAA,yBAAO,EAAC,cAAc,EAAE,EAAE,OAAO,EAAE,wCAAwC,EAAE,CAAC;;4CAC5D;AAKnB;IAHC,IAAA,4BAAU,GAAE;IACZ,IAAA,0BAAQ,GAAE;IACV,IAAA,yBAAO,EAAC,cAAc,EAAE,EAAE,OAAO,EAAE,+CAA+C,EAAE,CAAC;;uCACxE;AAMd;IAJC,IAAA,4BAAU,GAAE;IACZ,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,MAAM,CAAC;IAClB,IAAA,uBAAK,GAAE;IACP,IAAA,qBAAG,EAAC,CAAC,EAAE,EAAE,OAAO,EAAE,yBAAyB,EAAE,CAAC;;uCAC9B;AAOjB;IALC,IAAA,4BAAU,GAAE;IACZ,IAAA,wBAAI,EAAC,GAAG,EAAE,CAAC,MAAM,CAAC;IAClB,IAAA,uBAAK,GAAE;IACP,IAAA,qBAAG,EAAC,CAAC,EAAE,EAAE,OAAO,EAAE,0BAA0B,EAAE,CAAC;IAC/C,IAAA,qBAAG,EAAC,GAAG,EAAE,EAAE,OAAO,EAAE,yBAAyB,EAAE,CAAC;;wCAC9B;AAGrB,MAAa,aAAc,SAAQ,SAAS;CAG3C;AAHD,sCAGC","sourcesContent":["// external dependencies\r\nimport {\r\n  IsString,\r\n  IsOptional,\r\n  IsInt,\r\n  Min,\r\n  Max,\r\n  Matches,\r\n} from \"class-validator\";\r\nimport { Type } from \"class-transformer\";\r\n\r\nconst DEV_REPO_REGEX = /^[\\w-]+$/;\r\n\r\nexport class GetPrsDto {\r\n  @IsString()\r\n  @Matches(DEV_REPO_REGEX, { message: \"developer must be a valid GitHub login\" })\r\n  developer!: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  @Matches(DEV_REPO_REGEX, { message: \"repo must be alphanumeric, dash or underscore\" })\r\n  repo?: string;\r\n\r\n  @IsOptional()\r\n  @Type(() => Number)\r\n  @IsInt()\r\n  @Min(1, { message: \"page must be at least 1\" })\r\n  page: number = 1;\r\n\r\n  @IsOptional()\r\n  @Type(() => Number)\r\n  @IsInt()\r\n  @Min(1, { message: \"limit must be at least 1\" })\r\n  @Max(100, { message: \"limit cannot exceed 100\" })\r\n  limit: number = 10;\r\n}\r\n\r\nexport class GetMetricsDto extends GetPrsDto {\r\n  // inherits developer + optional repo + page + limit\r\n  // we can add other metric-specific fields in future here if needed\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0027605f239a61764d2ae231eacf66e6f21d807d","contentHash":"658b2bf25ee57cac7b8a20d27caf39cfd722790907990a7e042dd385e71d484b"},"D:\\projects\\github-pr-analytics\\src\\middlewares\\validateRequest.ts":{"path":"D:\\projects\\github-pr-analytics\\src\\middlewares\\validateRequest.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":33}},"14":{"start":{"line":14,"column":28},"end":{"line":14,"column":56}},"15":{"start":{"line":15,"column":26},"end":{"line":15,"column":52}},"16":{"start":{"line":17,"column":23},"end":{"line":17,"column":56}},"17":{"start":{"line":28,"column":24},"end":{"line":61,"column":1}},"18":{"start":{"line":29,"column":4},"end":{"line":60,"column":7}},"19":{"start":{"line":29,"column":31},"end":{"line":60,"column":6}},"20":{"start":{"line":31,"column":25},"end":{"line":43,"column":9}},"21":{"start":{"line":32,"column":12},"end":{"line":33,"column":23}},"22":{"start":{"line":33,"column":16},"end":{"line":33,"column":23}},"23":{"start":{"line":34,"column":12},"end":{"line":42,"column":13}},"24":{"start":{"line":35,"column":28},"end":{"line":35,"column":36}},"25":{"start":{"line":36,"column":16},"end":{"line":41,"column":17}},"26":{"start":{"line":37,"column":36},"end":{"line":37,"column":46}},"27":{"start":{"line":39,"column":20},"end":{"line":39,"column":71}},"28":{"start":{"line":40,"column":20},"end":{"line":40,"column":41}},"29":{"start":{"line":44,"column":8},"end":{"line":44,"column":27}},"30":{"start":{"line":45,"column":8},"end":{"line":45,"column":28}},"31":{"start":{"line":46,"column":8},"end":{"line":46,"column":29}},"32":{"start":{"line":48,"column":23},"end":{"line":48,"column":155}},"33":{"start":{"line":49,"column":23},"end":{"line":49,"column":77}},"34":{"start":{"line":50,"column":8},"end":{"line":56,"column":9}},"35":{"start":{"line":51,"column":29},"end":{"line":53,"column":27}},"36":{"start":{"line":52,"column":32},"end":{"line":52,"column":68}},"37":{"start":{"line":54,"column":12},"end":{"line":54,"column":90}},"38":{"start":{"line":55,"column":12},"end":{"line":55,"column":19}},"39":{"start":{"line":58,"column":8},"end":{"line":58,"column":35}},"40":{"start":{"line":59,"column":8},"end":{"line":59,"column":15}},"41":{"start":{"line":62,"column":0},"end":{"line":62,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":28,"column":24},"end":{"line":28,"column":25}},"loc":{"start":{"line":28,"column":69},"end":{"line":61,"column":1}},"line":28},"8":{"name":"(anonymous_8)","decl":{"start":{"line":29,"column":11},"end":{"line":29,"column":12}},"loc":{"start":{"line":29,"column":31},"end":{"line":60,"column":6}},"line":29},"9":{"name":"(anonymous_9)","decl":{"start":{"line":29,"column":65},"end":{"line":29,"column":66}},"loc":{"start":{"line":29,"column":78},"end":{"line":60,"column":5}},"line":29},"10":{"name":"(anonymous_10)","decl":{"start":{"line":31,"column":25},"end":{"line":31,"column":26}},"loc":{"start":{"line":31,"column":34},"end":{"line":43,"column":9}},"line":31},"11":{"name":"(anonymous_11)","decl":{"start":{"line":52,"column":25},"end":{"line":52,"column":26}},"loc":{"start":{"line":52,"column":32},"end":{"line":52,"column":68}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":28,"column":35},"end":{"line":28,"column":64}},"type":"default-arg","locations":[{"start":{"line":28,"column":45},"end":{"line":28,"column":64}}],"line":28},"6":{"loc":{"start":{"line":32,"column":12},"end":{"line":33,"column":23}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":33,"column":23}},{"start":{},"end":{}}],"line":32},"7":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":47}},"type":"binary-expr","locations":[{"start":{"line":32,"column":16},"end":{"line":32,"column":20}},{"start":{"line":32,"column":24},"end":{"line":32,"column":47}}],"line":32},"8":{"loc":{"start":{"line":36,"column":16},"end":{"line":41,"column":17}},"type":"if","locations":[{"start":{"line":36,"column":16},"end":{"line":41,"column":17}},{"start":{},"end":{}}],"line":36},"9":{"loc":{"start":{"line":50,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":56,"column":9}},{"start":{},"end":{}}],"line":50},"10":{"loc":{"start":{"line":52,"column":46},"end":{"line":52,"column":67}},"type":"binary-expr","locations":[{"start":{"line":52,"column":46},"end":{"line":52,"column":61}},{"start":{"line":52,"column":65},"end":{"line":52,"column":67}}],"line":52}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"D:/projects/github-pr-analytics/src/middlewares/validateRequest.ts","sources":["D:/projects/github-pr-analytics/src/middlewares/validateRequest.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,wBAAwB;AACxB,yDAAoD;AACpD,qDAA6D;AAG7D,wBAAwB;AACxB,yDAAsD;AAGtD;;;;;;;;;GASG;AACI,MAAM,eAAe,GAAG,CAC7B,QAAsB,EACtB,UAA4B,EAAE,SAAS,EAAE,IAAI,EAAE,EAC/B,EAAE;IAClB,OAAO,CACL,GAAwB,EACxB,GAAa,EACb,IAAkB,EACH,EAAE;QACjB,4DAA4D;QAC5D,MAAM,QAAQ,GAAG,CAAC,GAA4B,EAAE,EAAE;YAChD,IAAI,CAAC,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ;gBAAE,OAAO;YAC5C,KAAK,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;gBACnC,MAAM,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;gBACrB,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,CAAC;oBAC5B,IAAI,SAAS,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;oBAC3B,sCAAsC;oBACtC,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;oBACnD,GAAG,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC;gBACvB,CAAC;YACH,CAAC;QACH,CAAC,CAAC;QACF,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACnB,QAAQ,CAAC,GAAG,CAAC,KAA+B,CAAC,CAAC;QAC9C,QAAQ,CAAC,GAAG,CAAC,MAAgC,CAAC,CAAC;QAE/C,aAAa;QACb,MAAM,MAAM,GAAG,IAAA,mCAAe,EAAC,QAAQ,gDAClC,GAAG,CAAC,MAAM,GACV,GAAG,CAAC,KAAK,GACT,GAAG,CAAC,IAAI,EACX,CAAC;QACH,MAAM,MAAM,GAAG,MAAM,IAAA,0BAAQ,EAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QAC/C,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACtB,MAAM,QAAQ,GAAG,MAAM;iBACpB,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC;iBACpD,IAAI,CAAC,IAAI,CAAC,CAAC;YACd,GAAG,CAAC,MAAM,CAAC,2BAAY,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;YAC/D,OAAO;QACT,CAAC;QAED,yCAAyC;QACzC,GAAG,CAAC,aAAa,GAAG,MAAM,CAAC;QAE3B,IAAI,EAAE,CAAC;IACT,CAAC,CAAA,CAAC;AACJ,CAAC,CAAC;AA9CW,QAAA,eAAe,mBA8C1B","sourcesContent":["// external dependencies\r\nimport { plainToInstance } from 'class-transformer';\r\nimport { validate, ValidatorOptions } from 'class-validator';\r\nimport { RequestHandler, Response, NextFunction } from 'express';\r\n\r\n// internal dependencies\r\nimport { STATUS_CODES } from '../common/constants.js';\r\nimport { ClassType, ValidatedRequest } from '../common/types.js';\r\n\r\n/**\r\n * Middleware to sanitize and validate request data against a DTO class\r\n * Sanitizes req.body, req.query, and req.params by trimming and removing dangerous characters,\r\n * then validates against the provided DTO, attaching the validated object to req.validatedBody\r\n * Attaches the validated DTO to req.validatedBody if valid\r\n *\r\n * @param dtoClass - DTO class to validate against\r\n * @param options - class-validator options (whitelist, transform, etc.)\r\n * @returns A middleware function that validates the request body\r\n */\r\nexport const validateRequest = <T extends object>(\r\n  dtoClass: ClassType<T>,\r\n  options: ValidatorOptions = { whitelist: true }\r\n): RequestHandler => {\r\n  return async (\r\n    req: ValidatedRequest<T>,\r\n    res: Response,\r\n    next: NextFunction\r\n  ): Promise<void> => {\r\n    // Sanitization: trim and remove potentially dangerous chars\r\n    const sanitize = (obj?: Record<string, string>) => {\r\n      if (!obj || typeof obj !== 'object') return;\r\n      for (const key of Object.keys(obj)) {\r\n        const val = obj[key];\r\n        if (typeof val === 'string') {\r\n          let sanitized = val.trim();\r\n          // remove < > \" ' ` ; ( ) \\ characters\r\n          sanitized = sanitized.replace(/[<>\"'`;()\\\\]/g, '');\r\n          obj[key] = sanitized;\r\n        }\r\n      }\r\n    };\r\n    sanitize(req.body);\r\n    sanitize(req.query as Record<string, string>);\r\n    sanitize(req.params as Record<string, string>);\r\n\r\n    // Validation\r\n    const dtoObj = plainToInstance(dtoClass, {\r\n      ...req.params,\r\n      ...req.query,\r\n      ...req.body,\r\n    });\r\n    const errors = await validate(dtoObj, options);\r\n    if (errors.length > 0) {\r\n      const messages = errors\r\n        .flatMap(err => Object.values(err.constraints || {}))\r\n        .join('; ');\r\n      res.status(STATUS_CODES.BAD_REQUEST).json({ error: messages });\r\n      return;\r\n    }\r\n\r\n    // Attach the validated and sanitized DTO\r\n    req.validatedBody = dtoObj;\r\n\r\n    next();\r\n  };\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4dc676fd6260d089c084d090fd6b19fc00dc678b","contentHash":"41fdf2e2cf015fd3ebe621ddb2bfbe308f0780a07648804ab7e9363afdde1a11"}}